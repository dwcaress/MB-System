MB-SYSTEM VERSION 5.0.6 README FILE:
----------------------------------------

This file is located at the top of the MB-System directory
structure. This directory structure contains the version 
5.0.6 release of the MB-System software package for 
processing and display of swath sonar data.  

MB-SYSTEM VERSION 5 DESCRIPTION:
-------------------------------

MB-System is a software package consisting of programs which
manipulate, process, list, or display swath sonar
bathymetry, amplitude, and sidescan data. This software is
distributed freely (and for free) in the form of source code
for Unix platforms. The heart of the system is an
input/output library called MBIO which allows programs to
work transparently with any of a number of supported swath
sonar data formats. This approach has allowed the creation
of "generic" utilities which can be applied in a uniform
manner to sonar data from a variety of sources. Most of the
programs are command-line tools, but the package does
include graphical tools for editing swath bathymetry,
editing navigation, modeling bathymetry calculation, and
adjusting survey navigation.

MB-SYSTEM VERSION 5 RELEASE DATES:
-----------------------------------------
Version 5.0.6          February 19, 2005
Version 5.0.5          October 6, 2004
Version 5.0.4          May 22, 2004
Version 5.0.3          February 27, 2004
Version 5.0.2          December 24, 2003
Version 5.0.1          December 12, 2003
Version 5.0.0          December 5, 2003

MB-SYSTEM VERSION 5 BETA RELEASE DATES:
-----------------------------------------
Version 5.0.beta31     April 29, 2003
Version 5.0.beta30     April 25, 2003
Version 5.0.beta29     March 10, 2003
Version 5.0.beta28     January 14, 2003
Version 5.0.beta27     November 13, 2002
Version 5.0.beta26     November 3, 2002
Version 5.0.beta25     October 15, 2002
Version 5.0.beta24     October 4, 2002
Version 5.0.beta23     September 20, 2002
Version 5.0.beta22     August 30, 2002
Version 5.0.beta21     July 25, 2002
Version 5.0.beta20     July 20, 2002
Version 5.0.beta18     May 31, 2002
Version 5.0.beta17     May 1, 2002
Version 5.0.beta16     April 5, 2002
Version 5.0.beta15     March 26, 2002
Version 5.0.beta14     February 25, 2002
Version 5.0.beta13     February 22, 2002
Version 5.0.beta12     January 2, 2002
Version 5.0.beta11     December 20, 2001
Version 5.0.beta10     November 20, 2001
Version 5.0.beta09     November 6, 2001
Version 5.0.beta08     October 19, 2001
Version 5.0.beta07     August 10, 2001
Version 5.0.beta06     July 30, 2001
Version 5.0.beta05     July 23, 2001
Version 5.0.beta04     July 20, 2001
Version 5.0.beta03     July 19, 2001
Version 5.0.beta02     June 30, 2001
Version 5.0.beta01     June 8, 2001
Version 5.0.beta00     April 6, 2001

MB-SYSTEM AUTHORS:
-----------------
David W. Caress (caress@mbari.org)
Monterey Bay Aquarium Research Institute
7700 Sandholdt Road
Moss Landing, CA 95039

Dale N. Chayes (dale@ldeo.columbia.edu)
Lamont-Doherty Earth Observatory of Columbia University
Rte 9W
Palisades, NY 10964

MB-SYSTEM COPYRIGHT, LICENSING AND CAVEAT:
-----------------------------------------
MB-System Copyright (C) 1993-2005 by
David W. Caress (caress@mbari.org)
  Monterey Bay Aquarium Research Institute
  Moss Landing, CA 95039
Dale N. Chayes (dale@ldeo.columbia.edu)
  Lamont-Doherty Earth Observatory
  Palisades, NY 10964mbbackangle.manl
All Rights Reserved
All Wrongs Remembered

The MB-System source code is distributed under the GNU
General Public License as formulated by the GNU Project.
Previous MB-System distributions have been described as
"public domain", which meant there was no restrictions
whatsoever on the use of the code. We have now adopted the
more restrictive GNU GPL license in order to insure that
anyone who distributes software based in whole or in part on
MB-System also distributes the modified MB-System source
code and any additional source code.

The GNU GPL also prohibits the distribution of proprietary
executables linked with MB-System libraries unless the
source code is also distributed. We waive this restriction
on distributing proprietary compiled programs for specific
software products if and only if those software products
meet the following two conditions:
   1) The software product was created, sold, and
delivered to customers using source code derived from MB-
System release 4.6 distributions.
   2) The software product was sold and delivered to
customers prior to January 1, 2001.

The MB-System does not come with any warranties, nor is it
guarenteed to work on your computer or to do anything useful. The
user assumes full responsibility for the use of this system. In
particular, David W. Caress, Dale N. Chayes, the Lamont-Doherty 
Earth Observatory of Columbia University, the Monterey Bay 
Aquarium Research Institute, or any other individuals or 
organizations involved in the design and maintenance of the 
MB-System software package are NOT responsible for any damage 
that may follow from correct or incorrect use of these programs.

MB-SYSTEM VERSION 5.0.6 RELEASE NOTES:
------------------------------------------

The version 5.0.6 release of MB-System includes several changes
relative to the 5.0.5 release.

The man page for mbprocess has been updated with full
documentation of the navigation formats supported for
merging by mbprocess.

The merging of heading and attitude data from navigation files
has been fixed.

The ability to merge attitude data from a separate file
has been added to mbprocess, and the mbprocess and mbset
man pages have been updated.

A problem producing ascii grids from mbgrid and mbmosaic
has been identified, and a fix suggested by Gordon Keith
adopted.

A problem with the -D option of mblist has been identified,
and a fix suggested by Gordon Keith adopted.

A new program called mbneptune2esf has been contributed by
Gordon Keith. MBneptune2esf  imports manual data flagging 
performed using Simrad's NEPTUNE software and flags those  
beams  in  the corresponding MB-System files.

A new program called mbauvnavusbl has been added to the
distribution. MBauvnavusbl reads a primary navigation file 
(usually from a submerged platform swath survey) and also 
reads secondary navigation (e.g. USBL fixes).  The program 
calculates position offsets between the raw survey navigation
and the secondary navigation every 3600 seconds (10 minutes), 
and then linearly interpolates and applies this adjustment 
vector for each primary navigation position. The adjusted 
navigation is output.

The ability to annotate tracklines on swath plots with
the swath filenames has been added to mbm_plot and 
mbcontour. The annotation occurs at the beginning of the
data associated with each file. This option can be used
most simply by specifying -NF in mbm_plot. The suggestion 
and initial implementation were contributed by Gordon Keith.

A problem with setting file paths in parameter files in
the different directories associated with recursive
datalists has been fixed. The nature of and fix to this
bug were determined by Gordon Keith.

Fixed makefiles to link libpsl.a with all programs making
libgmt.a calls. This was necessitated by changes to the
GMT4.0 release relative to the GMT4.0beta release.

Implemented latest GSF release (2.0.3).

Fixed, but not satisfactorily, a problem reading some older
EM3000 data with the current format 56 i/o module.

Added release version of simple grid visualization demo 
mbgrdviz.

Improved the ability of mbgrid to embed background
datasets.

MB-SYSTEM VERSION 5.0.5 RELEASE NOTES:
------------------------------------------

The version 5.0.5 release of MB-System includes several changes
relative to the 5.0.4 release.

The program mbgrid can now obtain background data from GMT grid
files using grd2xyz as well as through raster databases using 
grdraster. See the -Kbackground option documentation in the
mbgrid manual page.

The macro mbm_xbt has been substantially updated.

The -G option of mbinfo now avoids reporting zero starting 
positions (it always ignored zero positions for the reported
data bounds).

Provides read-only support for Edgetech sidescan and subbottom
profiler data in the new Reson 6046 format (format id 88).

A new program mbextractsegy allows for the extraction of 
subbottom profiler data into separate files in the SEGY
format (this can apply only to data formats that incorporate
subbottom data in with swath sonar data, and at present only
supports format 88).

A new program mbsegyinfo is a utility for reading a segy 
format seismic data file and outputting some basic statistics. 
The table generated shows the filename, data counts, navigation 
totals, time and navigation of the first and last data records, 
minimum and maximum data values, and the geographic bounding box 
of the data.

A new program mbsegylist is a utility to output specified 
header values from segy seismic data files to stdout. 
The option -Ooutput_format is used to control the type and 
order of values output. By default, mbsegylist produces 
ASCII files in spreadsheet style, with data columns separated by
tabs. Alternatively, the output can be binary, with each field 
represented as a double precision float (-A option).

A new program mbsegygrid generates grids from subbottom
profiler data (and seismic reflection data, and potentially
other seismic data) in the SEGY format. These grids can then
be displayed using GMT (through mbm_grdplot if desired).

The program mbm_plot now works properly when start and end times 
are specified using the -MMB and -MME options.

A bug involving the handling of edit save filenames by mbset and
mbprocess has been fixed.

Errors in handling Simrad datagrams and edit save files on 
byteswapped  machines (e.g. Intel or AMD processors) have been 
fixed.

The program mbdatalist has a new option -Z which causes a 
standard "datalistp.mb-1" file to be created. This is a
convenience file that applies the $PROCESSED flag to be 
applied to the swath files referenced in a datalist named
"datalist.mb-1".

Problems with the creation of amplitude vs. grazing angle
correction tables using mbbackangle, and the use of those
tables by mbprocess, have been fixed. The default settings
for mbbackangle and amplitude vs. grazing angle correction
by mbprocess have been changed.

The default angle mode for raytracing has been changed so
that starting angles are adjusted using Snell's Law for the
difference between the SSV and the initial depth in the SVP.
This change affects mbvelocitytool, mbsvplist, mbset, and 
mbprocess. 

The program mbsvplist now has an option -P that not only 
outputs SVPs in a swath file to individual ancillary SVP
files (as with the -O option), but also sets the first SVP
output file to be used by mbprocess to recalculate the
bathymetry.

Problems with the MGD77 format i/o module have been fixed
according to suggestions from Bob Covill.

MB-SYSTEM VERSION 5.0.4 RELEASE NOTES:
------------------------------------------

The version 5.0.4 release of MB-System includes several changes
relative to the 5.0.3 release.

All of the interactive tools (MBedit, MBnavedit, MBvelocitytool,
MBnavadjust) have been changed to require linking with the Motif 2.0
or later library (or compatible open source versions such as OpenMotif
or LessTif).

The MB-System distribution is now compatible with GMT 4.0b. There have 
been minor changes to the pslib and gmtlib APIs, so it is necessary
to specify the linked version of GMT in the mbsystem/install_makefiles
script. Set:
	$GMTVERSION = "4.0";
if you are using GMT 4.0b, or set:
	$GMTVERSION = "3.4";
if you are still using GMT 3.4

MBnavadjust has a significant new feature in which the contours
displayed by the Nav Err window can be pre-generated. This greatly
increases the speed with which the bathymetry crossings can be
analyzed.

A "Flag View" feature has been added to MBedit, allowing users to
flag all of the beams in the current display. Key macros have also
been defined for both the "Flag View" and "Unflag View" buttons.

The raw Hydrosweep DS format (format 21) i/o module now estimates
travel times from the bathymetry when data files lacking travel time
records are read. This allows users to recalculate bathymetry by
raytracing even if the travel times are not recorded.

MB-SYSTEM VERSION 5.0.3 RELEASE NOTES:
------------------------------------------

The version 5.0.3 release of MB-System includes two bug fixes
relative to the 5.0.2 release. 

We have fixed a bug in the i/o modules for Simrad multibeam
data (formats 56 and 57) that caused a failure to gracefully
handle unsupported datagrams on byteswapped systems (e.g.
Intel processors running Linux).

We have fixed a bug that caused edit save files to be incorrectly
read on byteswapped systems (e.g. Intel processors running Linux).

We have fixed a bug in the i/o modules for binary SeaBeam 2100
data (formats 42 and 43) that caused data to be written incorrectly
on byteswapped systems (e.g. Intel processors running Linux).

MB-SYSTEM VERSION 5.0.2 RELEASE NOTES:
------------------------------------------

The version 5.0.2 release of MB-System includes two bug fixes
relative to the 5.0.1 release. 

We have fixed a bug in the i/o module for Elac Bottomchart data 
in the XSE format (94) in which the sonar depth was added to
bathymetry values when new data files were written.

We have also fixed problems related to reading and writing
SeaBeam 2100 data in the binary formats 42 and 43.

MB-SYSTEM VERSION 5.0.1 RELEASE NOTES:
------------------------------------------

The version 5.0.1 release of MB-System includes two bug fixes
relative to the 5.0.0 release. The program mbgrid has been 
fixed so that it compiles correctly under Red Hat Linux. The
program mbcopy has been fixed so that time and space bounds
are successfully applied to pings with a time gap error.

Also, the distribution now has a top directory name of mbsystem-5.0.1 
rather than just mbsystem. This will allow users to unpack the 
distribution in the target location without overwriting an existing 
older MB-System installation. Users can then rename the directory to 
mbsystem or create a soft link to mbsystem-5.0.1 named mbsystem 
(e.g. ln -s mbsystem-5.0.1 mbsystem).

MB-SYSTEM VERSION 5.0.0 RELEASE NOTES:
------------------------------------------

The version 5.0 release of MB-System includes a number of
changes and improvements relative to the version 4 releases.
The most significant changes include:

A new approach to managing data processing.
- Many tools - one output file. 
    In previous versions of MB-System, each processing 
    program read an input swath data file and 
    produced an output swath data file. This "serial"
    processing scheme generally produced a large number of
    intermediate data files. MB-System version 5.0 features the
    integration of the editing and analysis tools with a single
    program, mbprocess, that outputs processed data files. The
    new "parallel" processing scheme covers bathymetry data
    processing, but does not yet incorporate the sidescan
    processing capabilities. All of the old tools and
    capabilities are still part of the distribution.
- Recursive datalists. 
    The lists of data files used by gridding and plotting 
    programs can now be recursive, making it simpler to manage 
    data from many different surveys.
- Automatic format identification. 
    MB-System programs will now attempt to automatically 
    identify the swath data format based on the filename suffix.
- Extended inf files. 
    Users can generate inf files by directing the output 
    of mbinfo to a file named by adding an
    ".inf" suffix to the swath data file name. Several programs
    can parse inf files, if they exist, to quickly obtain data
    locations or ranges. This feature speeds operations such as
    gridding, mosaicing, and automated plotting.

New tools.
- mbnavadjust. 
    This new tool allows users to adjust poorly
    navigated surveys by matching features in overlapping
    swathes. It is particularly useful for processing surveys
    conducted from submerged platforms.
- mbprocess. 
    This new tool performs a variety of processing
    tasks and produces a single output processed swath data
    file. The program mbprocess can apply bathymetry edits from
    mbedit and mbclean, navigation edits from mbnavedit, sound
    velocity profile changes from mbvelocitytool, and a variety
    of other corrections.
- mbset. 
    This new tool allows users to create and modify the
    parameter files used to control the operation of mbprocess.
- mbdatalist. 
    This new tool allows users to list the files referenced by 
    a recursive datalist structure. It can also be used to create 
    the ancillary ".inf", ".fbt", and ".fnv" files for all of the 
    data files referenced in a recursive datalist structure. 
- mbsvplist. 
    This new tool lists water sound velocity profiles embedded in 
    swath data files, creating secondary files that  can be read 
    into MBvelocitytool.
- mbareaclean. 
    This new tool identifies and flags artifacts in swath sonar 
    bathymetry data within a specified area of interest. The area 
    is divided into a grid with square cells or bins, and the 
    data are grouped according to these bins. Once all of  data  
    are read, statistical tests are applied  to the soundings 
    within each bin.

Improved bathymetry and navigation editors.
- MBedit and MBnavedit now swallow data files whole rather than 
    reading in limited size buffers.
- MBedit now outputs beam edit events rather than an entire swath 
    file. The edits are applied by MBprocess.
- MBnavedit now outputs the edited navigation rather than an entire 
    swath file. The edited navigation is merged using MBprocess.
- Both editors show the position of the currently displayed data 
    within the entire data file.
- MBnavedit has two navigation modeling modes relevant to swath 
    data collected using poorly navigated ROVs and towfishes. One 
    mode applies a dead reckoning model with interactively set drifts, 
    and the other involves inverting for an optimally smooth 
    navigation by penalizing speed and acceleration.
 
Support for Projected Coordinate Systems
- MB-System now incorporates the source code for the PROJ.4 
    Cartographic Projections library, providing support for 
   (apparently) all commonly used geodetic coordinate systems.  
    PROJ.4 was developed by Gerald Evenden (then of the USGS), 
    and was obtained from the www.remotesensing.org website.
- A large number of commonly used projected coordinate systems 
    (e.g. UTM) are defined in a file (mbsystem/share/projections.dat) 
    distributed with MB-System. These include all of the standard 
    UTM zones, all of the standard state plate coordinate systems, 
    and most of the European Petroleum Survey Group (EPSG) 
    coordinate systems (also including UTM).
- MB-System can now handle swath data that is navigated in a supported 
    projected coordinate system. In particular, data files that are 
    navigated with UTM eastings and northings instead of longitude and  
    latitude can now be plotted and processed with MB-System.
- The programs mbgrid and mbmosaic can now output grids and mosaics 
    in any of the projected coordinate systems specified in 
    mbsystem/share/projections.dat.
- The TIFF  images generated with mbm_grdtiff and mbgrdtiff 
    now fully conform to the GeoTIFF standard, providing that the 
    source grids or mosaics were generated using mbgrid or mbmosaic  
    in either Geographic coordinates, UTM coordinates, or any of the 
    EPSG coordinate systems specified in the projections.dat file. 
    This means, for instance, that GeoTIFF images generated  with 
    mbgrdtiff will be properly georeferenced when they are 
    imported into ESRI ArcGIS or other GIS packages.

Restructuring the code.
- All of the C code now conforms to the ANSI C standard.
- The underlying input/output library (MBIO) has been
    substantially rewritten. The structure has been streamlined,
    simplifying both future development and support of the
    existing code. The MBIO API has been greatly modified.

Handling of old Simrad multibeam data.
- Vendor format data from the old Simrad multibeams (pre-
    1997 sonars) are now supported by a single format id (51)
    rather than a separate format id for each sonar model. The
    old format id's are automatically aliased to 51, so existing
    shellscripts will continue to work.
- Sidescan data from old Simrad multibeams (pre-1997 sonars)
    are now handled in the same manner as data from the newer
    sonars (e.g. EM3000, EM3000, EM120). The raw samples in the
    vendor data format are binned, averaged, and interpolated
    into a 1024 pixel sidescan swath. This binned sidescan is
    not saved in the vendor format, so it is recommended that
    the data be copied to an extended format (57) that stores
    both bathymetry beam flags and processed sidescan. Format 57
    is also used for processing data from the current Simrad
    multibeam sonars.

Streamlining of MB-System Default Parameters.
- Prior to version 5.0, the MB-System defaults set by mbdefaults 
    included the format id, a control for ping averaging, 
    longitude and latitude bounds for windowing by area, and 
    begin and end times for windowing in time. These values are 
    no longer set in the .mbio_defaults file or controlled by 
    mbdefaults. As noted above, the format id is automatically 
    identified from the filename when possible. When filenames 
    do not match one of the recognized structures, users must 
    specify the format using the relevant programs -Fformat option. 
    The controls for ping averaging and windowing in time and 
    space are rarely used, and must now be explicitly set in 
    command line arguments.

New Data Formats
- Furuno HS10 multibeam bathymetry is supported as format 171.
- SeaBeam 2120 multibeam data in the L3 Communications XSE format 
    are supported as format 94 (already used to support Elac 
    Bottomchart MkII XSE data).
- Raw STN Atlas multibeam data generated by the upgraded 
    Hydrosweep DS2 multibeam on the R/V Ewing are supported by 
    read-only format 182. Processing is supported using the 
    augmented read-write format 183.
- The IFREMER netCDF multibeam archiving data format is supported 
    as format 75. Similarly, the IFREMER netCDF navigation  
    archiving data format is supported as format 167.
- The STN Atlas processing data format SURF is supported as 
    format 181. At present, SURF is supported as a read-only 
    format. This allows plotting and gridding of the SURF data, 
    but not processing. Writing or translating the SURF data to 
    allow processing will be supported in a later version. 
- The Hawaii Mapping Research Group's new MR1 format is supported 
    as format 64. This format is used to disseminate data from 
    both the HMRG interferometric sonars (e.g. MR1) and the 
    WHOI DSL 120 deep-towed inteferometric sonar. This format has 
    been supported by including the code for the HMRG library 
    libmr1pr in the MB-System library. Thanks to Roger Davis and 
    HMRG for making the code available under the GPL.

-------------------------------------------
THE NEW VERSION 5 DATA PROCESSING STRUCTURE
-------------------------------------------

Previous versions of MB-System have emphasized processing
utilities that operate serially, that is, that read in an
input swath data file, modify it, and then output a second
swath data file. Serial processing utilities do allow for
great flexibility in processing because one uses only the
programs required and, in general, the order in which the
programs are used does matter. However, one consequence of
serial processing has been that processing data frequently
results in a large number of intermediate data files. For
instance, if an EM300 data file called "mbari_1998_524.mb57"
has spikes in the bathymetry, outliers in the navigation,
a strong high amplitude peak in the central sidescan swath,
and the bathymetry has been calculated using an incorrect
model for the water sound speed structure, users of MB-
System would previously have processed it with a sequence
something like this:

   1) Run mbclean to automatically flag
      the obvious bathymetric artifacts.
	  Input:  mbari_1998_524.mb57
	  Output: mbari_1998_524_c.mb57

   2) Run mbedit to interactively flag
      bathymetric artifacts.
	  Input:  mbari_1998_524_c.mb57
	  Output: mbari_1998_524_ce.mb57

   3) Run mbnavedit to interactively clean
      the navigation.
	  Input:  mbari_1998_524_ce.mb57
	  Output: mbari_1998_524_cen.mb57

   4) Run mbvelocitytool to generate an
      appropriate sound velocity profile (SVP) for
      recalculating the bathymetry.
	  Input:  mbari_1998_524_cen.mb57
	  Output: good.svp

   5) Run mbbath to recalculate the
      bathymetry using the SVP file generated
      using mbvelocitytool.
	  Input:  mbari_1998_524_cen.mb57
	  Input:  good.svp
	  Output: mbari_1998_524_cenb.mb57

   6) Run mbsimradmakess to recalculate the
      sidescan while ignoring sidescan samples
      from beams now flagged as bad.
	  Input:  mbari_1998_524_cenb.mb57
	  Output: mbari_1998_524_cenbs.mb57

   7) Run mbbackangle to calculate an amplitude
      vs grazing angle table for correcting
      sidescan.
	  Input:  mbari_1998_524_cenbs.mb57
	  Output: ampvsga.dat

   8) Run mbanglecorrect to correct the sidescan.
	  Input:  mbari_1998_524_cenbs.mb57
	  Input: ampvsga.dat
	  Output: mbari_1998_524_cenbsc.mb57

The result of this processing includes the input swath data
file, the final swath data file, and five intermediate
swath data files. The impact of this approach on data
storage requirements is obvious (though some users have
ameliorated the issue by working with scripts that
automatically delete unneeded data files or by piping data
from one non-graphical process to another to avoid making
intermediate files). The serial processing approach also
presents data management problems because data files
frequently have different processing requirements, even
within a single survey. We have found that working with very
large datasets can be awkward when only a minority of data
files require navigation editing or bathymetric
recalculation, or when some data files require multiple
episodes of bathymetry and navigation editing.

MB-System version 5 includes new utilities implementing a
parallel processing scheme that simplifies the processing of
most swath data. This scheme is centered around the program
mbprocess, which can accomplish the following processing
tasks in a single step:
   - Merge edited navigation generated by mbnavedit.
   - Apply bathymetry edit flags from mbedit
     and mbclean
   - Recalculate bathymetry from raw travel time and
     angle data by raytracing through water sound speed
     models from mbvelocitytool or mbsvplist.
   - Apply changes to roll bias, pitch bias, heading
     bias, and draft values.
   - Recalculate sidescan from raw backscatter samples
     (Simrad multibeam data only).
   - Correct sidescan for amplitude vs grazing angle
     patterns.
   - Apply tides to bathymetry.
The actions of mbprocess are controlled by text parameter
files. Each mbprocess parameter file is named by adding a
".par" suffix to the associated input swath data file and
contains single line commands that set processing modes and
parameters. Tools such as mbedit, mbnavedit, and mbclean all
generate and/or modify parameter files in addition to
generating parallel files used by mbprocess. The program
mbset can also be used to create and modify mbprocess
parameter files.

The same processing steps described above as a serial
processing scheme can be accomplished with the new parallel
processing scheme as follows:

   1) Run mbdatalist to create ancillary
      data files containing statistics 
      (".inf"), quickly read bathymetry
      (".fbt"), and quickly read navigation
      (".fnv"). These files are used to
      speed common operations such as swath
      plotting and gridding.
	  Input:  mbari_1998_524.mb57
	  Output: mbari_1998_524.mb57.inf
		  mbari_1998_524.mb57.fbt
		  mbari_1998_524.mb57.fnv

   2) Run mbclean to identify
      the obvious bathymetric artifacts
      and output a list of the edit events.
      The parameter file is created and
      set to apply bathymetry flags from
      the ".esf" file.
	  Input:  mbari_1998_524.mb57
	  Output: mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.par

   3) Run mbedit to interactively
      identify bathymetric artifacts
      and output a list of the edit events.
      The existing edits from mbclean
      are loaded and applied prior to editing.
      The parameter file is updated and
      set to apply bathymetry flags from
      the ".esf" file.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.par

   4) Run mbnavedit to interactively
      clean the navigation. The edited
      navigation is output to the ".nve" file.
      The parameter file is updated and
      set to merge the navigation from
      the ".nve" file.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.nve
		  mbari_1998_524.mb57.par

   5) Run mbvelocitytool to generate an
      an appropriate sound velocity profile
      (SVP) for recalculating the bathymetry.
      The SVP is output to the ".svp" file.
      The parameter file is updated and
      set to recalculate the bathymetry by
      raytracing through the SVP model from
      the ".svp" file.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.svp
		  mbari_1998_524.mb57.par

   6) Run mbbackangle to generate an
      a set of amplitude vs grazing angle
      tables at regular intervals in the
      data. These tables are placed into
      a single ".sga" file. The parameter 
      file is updated and set to correct 
      the sidescan by interpolating the 
      amplitude vs grazing angle table for 
      each ping.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.sga
		  mbari_1998_524.mb57.par

   7) Run mbset to set the parameter file
      so that mbprocess will recalculate
      the sidescan (this is for Simrad
      multibeam data only) while ignoring
      sidescan samples from beams now flagged
      as bad.
	  Input:  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.par

   8) Run mbprocess to apply the bathymetric
      edits, merge the cleaned navigation,
      recalculate the bathymetry, recalculate
      the sidescan, and correct the sidescan. 
      The processed swath data is written to 
      an output swath data file. The usual
      ancillary data files containing statistics,
      quickly read bathymetry, and quickly
      read navigation are also created.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.nve
		  mbari_1998_524.mb57.svp
		  mbari_1998_524.mb57.aga
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524p.mb57
	          mbari_1998_524p.mb57.inf
	          mbari_1998_524p.mb57.fbt
	          mbari_1998_524p.mb57.fnv

The result of this processing is a single output swath data
file. Moreover, the processed output can be easily updated
if, for example, additional bathymetry editing is required.
If the mbedit program is used again, it will load the
existing edit events from the ".esf" file and then update
the ".esf" file. To incorporate the updated bathymetry
edits, one just runs mbprocess again. One can similarly
change the SVP file without impacting on the bathymetry
editing or navigation editing components of the processing.

All of the old, serial processing utilities are still
distributed with MB-System. However, some of the serial
tools have been replaced by new versions of the same name
(e.g. mbedit, mbclean, mbbackangle, and mbnavedit).  In 
these cases, the old versions are preserved as programs 
with "old" added to their names (e.g. mbeditold, mbcleanold, 
mbbackangleold, and mbnaveditold). 

OTHER REQUIRED AND SUGGESTED SOFTWARE AND DATA
----------------------------------------------

MB-System requires a number of other software packages 
and databases to be fully functional. These are:

- GMT version 3.0 or later: MB-System makes use of the Generic Mapping Tools (GMT)
     libraries and programs for much of its graphics. GMT also includes a detailed global
     coastline database. GMT has been developed by Professor Paul Wessel of SOEST (School
     of Ocean and Earth Science and Technology at the Univeristy of Hawaii) and Dr. Walter
     H. F. Smith of NOAA. The GMT source code is available from the GMT web page. Use of
     GMT version 3.2 or later is strongly recommended. 
- NetCDF version 2.3r2 or later: Both GMT and MB-System require the NCAR netCDF
     library. 
- Perl version 4.0r19 or later: Perl is a fast, well documented scripting language used widely
     in the Unix world. MB-System contains a number of perl scripts used both for installation
     and to ease common tasks. Most of the current Unix operating systems include perl. If you
     need to obtain the perl source code, first check with your local system administrator - you
     will probably find perl already available locally. The perl source code can be obtained from
     the GNU Project software archive of the Free Software Foundation. 
- Motif: The interactive graphical utilities in MB-System (e.g. data editors) use the Motif
     widget set, and Motif-compatible libraries or equivalent are required for these utilities to
     be built and to run. Most current Unix operating systems include the required Motif
     libraries. If you do not have these libraries, you can obtain the OpenMotif source 
     code distribution from http://www.motifzone.net  Another open source 
     Motif-compatible distribution called LessTif (http://www.lesstif.org) has been 
     available for some time, and also works well with MB-System. 
- Levitus Database: The MB-System program mblevitus depends on a 16 MByte data file
     that is not included in the MB-System tarfile. Click here to ftp this file. Be sure to
     uncompress the file and to set the "LEVITUS" flag in the install_makefiles appropriately,
     as described below in the installation section. 

MB-System produces Postscript based graphics. Most current Unix operating systems provide a
program which serves as a screen-based Postscript viewer. If you do not have a Postscript viewer,
one option is to obtain the Ghostscript package from the Free Software Foundation.

- Ghostview: "Free" screen Postscript viewer. The source code can be obtained from the
     GNU Project software archive of the Free Software Foundation. 

HOW TO INSTALL MB-SYSTEM:
------------------------

The MB-System source code is extracted by first uncompressing the tar file and then running tar:
     % uncompress MB-System.tar.gz
     % tar xvf MB-System.tar

This will create a directory structure called mbsystem. In order to configure your installation,
you must edit the shellscript mbsystem/install_makefiles. This is perl script will read template
makefiles in the MB-System source directories and create makefiles with the correct attributes.
This enables users to install MB-System without having to edit the makefiles. Instead of editing
the makefiles directly, the installer should edit this script so that the locations of important
libraries and include files are accurate and so that the compile and link flags are correct.

The important parameters to be set in install_makefiles are:

     MBSYSTEM_HOME - Absolute path to the directory containing this file. 
     OS Operating system - (e.g. SUN, IRIX, HPUX, LINUX, LYNX). 
     BYTESWAPPED - If set to "YES" will enable byte swapping of input and output binary
     data. Otherwise byte swapping is disabled. Byte swapping needs to be enabled when
     installing on "little endian" machines such as PCs or VAXs. 
     CC - C compiler to be used (usually either cc or gcc) 
     CFLAGS - Compile flags for C source files. 
     LFLAGS - Load flags for all object files. 
     GRAPHICAL - If set to "YES" will enable the installation of the Motif based graphical
     utilities mbedit, mbnavedit, and mbvelocitytool. If Motif is not available but the
     nongraphical utilities are desired then disable with "NO" (optional, default is "YES"). 
     MOTIFINCDIR - Location of Motif include files. 
     MOTIFLIBS - X and Motif libraries required for graphical tools. 
     GMTVERSION - GMT version used. GMT version 3.2 is used by default; this parameter
     must be set to "3.0" or "3.1" to successfully link with libraries from either of those
     versions. 
     GMTLIBDIR - Location of GMT libraries libgmt.a and libpsl.a 
     GMTINCDIR - Location of GMT include files gmt.h, grd.h, and pslib.h 
     NETCDFDIR - Location of NetCDF library libnetcdf.a 
     LEVITUS - Path for Levitus data file annual. 

Examples of appropriate values for several different installations (e.g. Sun, SGI, PC) are included
in the comments in install_makefiles. To execute install_makefiles, do the following:

     % cd mbsystem 
     % install_makefiles

Because install_makefiles is a perl script, the executable perl must be available in the installer's
path. Once install_makefiles has been correctly configured and run, give the command "make all"
to generate the executable programs:

     % make all

The make command will descend recursively down through the directory structure, compiling
source files, linking object files, and copying executables and manual pages to the appropriate
directories. The executables will be placed in mbsystem/bin, the libraries in mbsystem/lib, and
the manual pages in mbsystem/man/man1.

Naturally, in order for users to use the MB-System utilities, the directory containing the
executables must be included in their path (usually this is done by editing the .cshrc file in the
user's home directory). The executable perl must also be available in the user's path for most of
the macros to work.

Most users will also wish to specify which program they generally use to view Postscript plots on
their screen. This parameter can be set either with the mbdefaults program or using the
PS_VIEWER environment variable - the former is recommended (see the mbdefaults manual
page for details). On Sun workstations pageview is a popular Postscript viewer; on Silicon
Graphics machines xpsview is commonly used. A popular generic alternative to these platform
specific programs is ghostview.

 
WEB BASED DOCUMENTATION:
------------------------
The html documentation consists of a number of html
documents and images in the directory mbsystem/html.
This documentation also comprises the MB-System
web page available from the Lamont web site at:
	http://www.ldeo.columbia.edu
and the MBARI web site at:
	http://www.mbari.org
Users can access the documentation in their own MB-System
installation by using a web browser and accessing the file:
	file:/usr/local/mbsystem/html/mbsystem_home.html
(here it is assumed that MB-System has been installed
in /usr/local). Currently, the documentation includes some
general information about MB-System (e.g. who wrote, how to
get it, how to install it) and a complete set of manual
pages. In the future we will add increasing amounts of 
information including examples of using MB-System.

CONTINUED SUPPORT:
-----------------
We are pleased to have received an additional five years 
(2001-2005) of NSF funding for the support and development 
of MB-System.  This project is also supported by the 
Monterey Bay Aquarium Research Institute.

CONTRIBUTIONS: 
--------------
We are actively soliciting contributions for inclusion in the
MB-System. In particular support for additional data formats in the
mbio.a library would be helpful, as would new, clever 
tools for data manipulation and processing.  We thank 
those who have already contributed to MB-System.

SUGGESTIONS:
------------
We are interested in your suggestions.

BUGS:
-----
There are undoubtably bugs in this software. Although we
make no promises about how rapidly problems will be fixed, we
strongly encourage users to notify us of bugs (and fixes!!).
We will continue to support this software for the forseeable
future.

ACKNOWLEDGMENTS:
----------------
A number of people have made contributions to the code
included in MB-System.  These include:
    Suzanne O'Hara (Lamont-Doherty Earth Observatory) 
    Daniel Scheirer (Brown University) 
    Paul Cohen (SeaBeam Instruments, now Fidelity Investments) 
    Steve Dzurenko (SeaBeam Instruments, now University of Texas) 
    Peter Lemmond (Woods Hole Oceanographic Institution) 
    David Brock (formerly with Antarctic Support Associates) 
    Alberto Malinverno (Lamont-Doherty Earth Observatory, later at
    Schlumberger-Doll) 
    Russ Alexander (formerly with UCSB) 

Numerous users and vendors have provided information regarding 
data file formats and sonar system specific characteristics.

Good mapping!!

Dave Caress caress@mbari.org
Dale Chayes dale@ldeo.columbia.edu

------------------------------------------------------------------------

RCS ID: $Id: README,v 5.57 2005-02-19 07:09:22 caress Exp $

Revision History:
$Log: not supported by cvs2svn $
Revision 5.56  2005/02/17 07:33:26  caress
Moving towards 5.0.6 release.

Revision 5.55  2005/02/08 22:37:37  caress
Heading towards 5.0.6 release.

Revision 5.54  2005/01/04 18:36:59  caress
Working towards release 5.0.6

Revision 5.53  2004/12/18 01:23:24  caress
Working towards 5.0.6 release.

Revision 5.52  2004/10/06 21:30:50  caress
Release 5.0.5

Revision 5.51  2004/09/16 21:49:59  caress
More changes leading up to 5.0.5 release.

Revision 5.50  2004/06/18 02:58:15  caress
Added first notes for 5.0.5 release.

Revision 5.49  2004/05/22 05:58:18  caress
Release 5.0.4

Revision 5.48  2004/05/22 04:22:02  caress
Release 5.0.4

Revision 5.47  2004/05/21 23:59:31  caress
Getting ready for release 5.0.4

Revision 5.46  2004/04/27 00:29:25  caress
Updated with recent changes.

Revision 5.45  2004/02/27 18:12:49  caress
Release 5.0.3

Revision 5.44  2004/02/26 22:41:02  caress
Release 5.0.3

Revision 5.43  2004/02/25 17:48:49  caress
Release 5.0.3

Revision 5.42  2003/12/24 08:51:05  caress
5.0.2 release.

Revision 5.41  2003/12/12 08:06:00  caress
Release 5.0.1

Revision 5.40  2003/12/05 08:21:22  caress
*** empty log message ***

Revision 5.39  2003/12/01 20:32:47  caress
Trying to get real 5.0.0 release out.

Revision 5.38  2003/07/27 13:14:12  caress
Release 5.0.0

Revision 5.37  2003/07/02 18:10:47  caress
Release 5.0.0

Revision 5.36  2003/04/29 20:31:08  caress
Release 5.0.beta31

Revision 5.35  2003/04/25 23:18:57  caress
Release 5.0.beta30

Revision 5.34  2003/04/23 06:26:52  caress
Release 5.0.beta30

Revision 5.33  2003/03/10 22:42:28  caress
Release 5.0.beta29

Revision 5.32  2003/01/15 21:15:01  caress
Release 5.0.beta28

Revision 5.31  2002/11/04 19:15:01  caress
Release 5.0.beta26

Revision 5.30  2002/10/15 19:22:24  caress
Release 5.0.beta25

Revision 5.29  2002/10/04 21:29:40  caress
Release 5.0.beta24

Revision 5.28  2002/10/02 23:51:50  caress
Release 5.0.beta24

Revision 5.27  2002/09/20 22:39:48  caress
Real release 5.0.beta23

Revision 5.26  2002/09/19 22:24:55  caress
Release 5.0.beta23

Revision 5.25  2002/09/19 17:31:21  caress
Release 5.0.beta23

Revision 5.24  2002/08/30 19:37:35  caress
Release 5.0.beta22

Revision 5.23  2002/08/28 01:43:27  caress
Release 5.0.beta22

Revision 5.22  2002/08/21 01:10:37  caress
Release 5.0.beta22
./

Revision 5.21  2002/07/25 19:11:35  caress
Release 5.0.beta21

Revision 5.20  2002/07/20 21:08:07  caress
Release 5.0.beta20

Revision 5.19  2002/05/31 19:58:28  caress
Release 5.0.beta18

Revision 5.18  2002/05/29 20:43:56  caress
Release 5.0.beta18

Revision 5.17  2002/04/06 03:10:12  caress
Release 5.0.beta16

Revision 5.16  2002/03/26 07:40:25  caress
Release 5.0.beta15

Revision 5.15  2002/02/26 07:59:33  caress
Release 5.0.beta15

Revision 5.14  2002/01/02 20:33:36  caress
Set real data of 5.0.beta12

# Revision 5.13  2001/12/30  20:31:31  caress
# Release 5.0.beta12
#
Revision 5.12  2001/11/20 22:11:20  caress
Release 5.0.beta09

# Revision 5.11  2001/11/16  20:14:47  caress
# Release 5.0.beta10
#
Revision 5.10  2001/11/07 01:57:54  caress
Fixed for release 5.0.beta09

# Revision 5.9  2001/11/07  01:15:08  caress
# Release 5.0.beta09
#
# Revision 5.8  2001/10/19  19:49:08  caress
# Release 5.0.beta08
#
# Revision 5.7  2001/08/10  23:10:08  dcaress
# Release 5.0.beta07
#
Revision 5.6  2001-07-30 17:51:15-07  caress
Release 5.0.beta06

# Revision 5.5  2001/07/27  19:28:38  caress
# Release 5.0.beta06.
#
# Revision 5.4  2001/07/20  16:48:26  caress
# Release 5.0.beta04
#
# Revision 5.3  2001/06/08  21:39:07  caress
# Version 5.0.beta01
#
# Revision 4.22  2000/09/26  20:32:27  caress
# Fixed reference to ftp site.
#
# Revision 4.21  2000/03/08  01:19:08  caress
# Release 4.6.10
#
# Revision 4.20  1999/09/16  23:09:54  caress
# Real version 4.6.6 release notes
#
# Revision 4.19  1999/09/15  21:29:37  caress
# Version 4.6.6 Release Notes
#
# Revision 4.18  1999/05/07  00:30:38  caress
# Version 4.6a release
#
# Revision 4.17  1999/04/16  00:26:05  caress
# Final 4.6 release?
#
# Revision 4.16  1998/12/17  23:09:42  caress
# MB-System version 4.6beta4
#
# Revision 4.15  1998/10/05  22:12:48  caress
# MB-System version 4.6beta
#
# Revision 4.14  1997/09/15  21:33:33  caress
# Fixed typo.
#
# Revision 4.13  1997/09/15  19:02:15  caress
# Real Version 4.5
#
# Revision 4.12  1997/04/21  16:51:19  caress
# MB-System 4.5 Beta Release.
#
# Revision 4.12  1997/04/17  17:37:59  caress
# MB-System 4.5 Beta Release.
#
# Revision 4.11  1996/09/05  12:57:11  caress
# Actual V4.4 release.
#
# Revision 4.10  1996/08/26  15:38:28  caress
# Release 4.4 revision.
#
# Revision 4.9  1996/01/26  21:32:53  caress
# Revision for real version 4.3 release.
#
# Revision 4.8  1995/08/17  16:34:39  caress
# Revision for release 4.3.
#
# Revision 4.7  1995/02/14  22:25:56  caress
# Version 4.2 Release
#
# Revision 4.6  1994/11/18  16:37:15  caress
# *** empty log message ***
#
# Revision 4.5  1994/10/21  21:54:24  caress
# Release V4.0
#
# Revision 4.4  1994/10/21  17:42:43  caress
# Release V4.0
#
# Revision 4.3  1994/10/21  13:29:54  caress
# Release V4.0
#
# Revision 4.2  1994/10/20  21:30:31  caress
# Release V4.0
#
# Revision 4.1  1994/08/03  21:00:43  dale
# Update for Beta issues......
#
# Revision 4.0  1994/03/05  23:06:24  caress
# Changes for release 4.0.
#
# Revision 3.7  1993/12/14  22:15:56  caress
# Changed for release version 3.4
#
# Revision 3.6  1993/11/06  21:24:39  caress
# Added discussion of src/realtime directory.
#
# Revision 3.5  1993/11/05  21:25:02  caress
# Added discussion of how to run make to generate the executables.
#
# Revision 3.4  1993/11/05  14:59:04  caress
# Some small changes by Dale.
#
# Revision 3.3  1993/11/04  17:46:36  caress
# Updated for version 3.3.  Added where to get required
# software packages and what Makefile to change to fit
# local environments.
#
# Revision 3.2  1993/08/25  14:41:41  dale
# Add porting, and requirements, and bugs and stuff for 3.2
#
# Revision 3.1  1993/04/22  16:09:21  dale
# Update and clarify the text, add third reason
#
# Revision 3.0  1993/04/22  16:04:29  dale
# *** empty log message ***
#

