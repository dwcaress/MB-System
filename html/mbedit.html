<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML VERSION="2.0">
<HEAD>
   <TITLE>MB-System Unix Manual Page: mbedit</TITLE>
<!-- WEBMAGIC VERSION NUMBER="2.0.2" -->
<!-- WEBMAGIC TRANSLATION NAME="ServerRoot" SRC="/var/www/htdocs/" DST="/" -->
<!-- WEBMAGIC TRANSLATION NAME="ProjectRoot" SRC="./" DST="" -->
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#336699" VLINK="#997040" ALINK="#CC9900">
<BODY>
<CENTER><H3><U>MB-System Unix Manual Page</U></H3></CENTER>
<PRE>
<H1>mbedit</H1>
Section: MB-System 5.0 (l)<BR>Updated: 29 August 2001<BR><A HREF="#index">Index</A>
<HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

<B>mbedit</B> - Interactive editor used to flag bad bathymetry values in swath sonar bathymetry data.
<P>
<A NAME="lbAC">&nbsp;</A>
<H2>VERSION</H2>

Version 5.0
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>mbedit</B> [<B>-B</B><I>yr/mo/da/hr/mn/sc</I> 
<B>-D</B> <B>-E</B><I>yr/mo/da/hr/mn/sc</I> 
<B>-F</B><I>format</I> <B> -G -I</B><I>infile</I> <B>-S -X -V -H</B>]
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>MBedit</B> is an interactive editor 
used to identify and flag artifacts in swath sonar 
bathymetry data. Once a file has been
read in, <B>MBedit</B> displays the bathymetry profiles
from several pings, allowing the user to identify and flag anomalous
beams. In extreme circumstances,
entire pings may be nulled (see &quot;KEYBOARD ACTIONS&quot;). 
<P>
In the default mode the edit events are output to 
an &quot;edit save&quot; file. The program can also be operated 
in a &quot;browse&quot; mode where no edit events are output.
If saved, the edit events can be applied 
to the data using the program <B>mbprocess</B>, which
outputs a processed swath data file. 
The <B>mbprocess</B> program is also used to merge
edited navigation, recalculate bathymetry, and apply
other corrections to swath bathymetry data. Users
may cause <B>mbprocess</B> to be run automatically by
specifying the <B>-X</B> option when starting <B>mbedit</B>.
<P>
In previous  versions of <B>MB-System</B> 
(version 4.6.10 or earlier), <B>mbedit</B>
produced output swath data files directly by reading and
storing all of the swath data information in memory (including
non-survey data records). This approach limited the 
amount of data that could be handled
at once, frequently requiring users to process files in
small pieces. The current version only stores the bathymetry
data and only outputs changes to the beam flag status
(good data or bad data) of bathymetry soundings.
The previous form of <B>mbedit</B> is now distributed
as <B>mbeditold</B>. The old version will continue to
be supported for <B>MB-System</B> version 5.0. However,
no improvements will be made to the old program, and
it may be dropped from later <B>MB-System</B> distributions.
<P>
The <B>mbedit</B> display consists of several 
bathymetry profiles plotted within
a box with annotation showing the scaling of the x 
(acrosstrack distance) and y (depth) axes. The number of pings displayed,
and the width, vertical exageration, and annotation of the plot 
are all set by the user. Unflagged bathymetry points
are shown as small filled black squares, and flagged bathymtetry points
are shown as small unfilled red or blue squares. Soundings 
flagged manually are shown in red, and those flagged by filter
algorithms are shown in green. When a sounding is selected in the
info mode, it is displayed as a large, filled, blue square.
The unflagged or good bathymetry
points are connected by black line segments to show the acrosstrack
bathymetry profiles for each ping. If the <B>Show Flagged Profile</B>
toggle is set on, then red line segments connect the flagged depth
values in the acrosstrack bathymetry profile.
Each of the displayed pings has a label giving the record number
in the data file, the ping time, and the center beam depth. 
<P>
The editing is driven by the left mouse button and 
involves four basic edit modes and one information mode. In toggle
mode each mouse pick toggles the nearest bathymetry point between
flagged and unflagged states. In pick mode each mouse pick flags
the nearest bathymetry point. In erase mode the left mouse button
is held down as the cursor is dragged over the data; all bathymetry
points touched by the mouse are flagged. Restore mode is just like
erase mode, except that the affected bathymetry values are unflagged.
Finally, info mode acts like pick mode, except that instead of flagging
the nearest sounding, the program displays information about the
selected ping and sounding above the bathymetry profile box.
A few keyboard macros described below add additional flexibility
to the editing process.
<P>
<B>MBedit</B> has some limited automatic flagging and unflagging
options. The <B>Unflag View</B> button allows users to unflag all of
the currently visible soundings, and the <B>Unflag Forward</B>
button unflags all soundings from the current position forward
to the end of the data held in memory. The <B>Controls</B> menu
includes a <B>Filters...</B> button that brings up a dialog
which sets the automatic flagging functions. At present, these
include a median filter algorithm, a &quot;wrong side filter&quot;, &quot;data 
cutting&quot; by beam number, and &quot;data cutting&quot; by acrosstrack
distance. The &quot;wrong side&quot; filter
flags soundings positioned on the &quot;wrong&quot; side of the
swath (port soundings incorrectly located on the starboard side,
or vice versa). The two &quot;data cutting&quot; algorithms flag
beams inside or outside of specified beam number ranges
or acrosstrack distance ranges, respectively. 
Additional automatic filters will be added
in later versions.
<P>
If the ping includes flagged depths outside the plotting box, the ping label
is underlain by a green box. If
the ping includes unflagged depths outside the plotting box, the label
is underlain by a red box, and a small black box appears to the left
of the label. These colored labels help users identify
bad bathymetry points which lie outside the box defined by the current
vertical exageration and plot width values. In the case where unflagged
depths lie outside the plotting box (red label), clicking on the small
black box to the left of the ping label automatically flags all of the
depth values outside the plotting box. Alternatively, 
users can decrease the
vertical exageration and/or increase the plot width to bring the
offending bathymetry points into view. Users should be aware that
extreme bathymetric slopes or the use of high vertical exagerations
may cause good depth values to lie outside the plotting box for
the first and last pings in view.
<P>
The middle and right mouse buttons allow the user to step forward
and backward, respectively, through the data file. The <B>Forward</B>
and <B>Reverse</B> buttons provide a duplicate stepping capability. 
Left-handed users may reverse the right and left mouse button functions by pulling down
the <B>Reverse Mouse Buttons</B> menu item from the <B>Controls</B> button.
<P>
<B>MBedit</B> can hold up to 25000 swath bathymetry 
profiles at a time in memory. In the case that
a data file contains more survey data records than can be held in memory,
users will find it necessary to step through multiple buffers of
data. The <B>Next Buffer</B> button will cause <B>MBedit</B> to
dump the current buffer contents and read in a new set of data.
The handling of buffered data is set 
using the <B>Buffer Controls</B> dialog accessed by pulling down the
<B>Buffer Controls...</B> menu item from the <B>Controls</B> button.
The <B>Buffer Controls</B> dialog includes two slider controls, one
entitled <B>Data Buffer Size</B> and the other <B>Buffer Retain Size</B>.
Users on memory limited machines may find it necessary to set the
maximum buffer size to a smaller number using the
<B>Data Buffer Size</B> slider.  The <B>Buffer Retain Size</B> 
slider sets the number of data records
retained from the old buffer when more data are loaded.
<P>
The user can bring up a <B>Go To Specified Time</B> dialog
by pulling down the <B>Go to a specified time...</B> menu item from the
<B>Controls</B> button. This dialog
allows the user to specify the time of a particular ping to be viewed.
The first ping with a time tag later than or equal to the specified time
is then displayed, providing such a ping is available. If an appropriate
ping is not available in the current buffer, <B>MBedit</B> will dump
and load buffers of data until such a ping is found or the end of the
file is reached. Thus, specifying an incorrect &quot;go to&quot; time may cause
<B>MBedit</B> to close the file. Caution is advised in using this feature.
<P>
<B>MBedit</B> creates &quot;edit save&quot; files containing a list of each
edit command executed during an editing session. These files are
given names consisting of the input filename appended with &quot;.esf&quot;.
The program also modifies the <B>mbprocess</B> parameter file
for the input file by specifying the edit save file and setting
the <B>mbprocess</B> mode to apply the edits when generating a
processed swath output file. If no parameter file named &quot;ifile.par&quot;
exists, <B>mbedit</B> creates one.
<P>
If a user seeks to open a swath sonar data 
file and an associated edit save file already exists, the user is
given an option to apply the saved edits to the data as it is loaded.
If the user chooses not to apply the saved edits, those edits will
be lost as a new edit save file is created.
If (as is usually the case) the saved edits are to be 
applied, <B>MBedit</B> copies the edit
save file to a file named &quot;mbedit_tmp.esf&quot; and reads the saved
edits from that second file. In this way, the use of 
edit save files and <B>mbprocess</B> allows users
to edit a swath data file multiple times without generating
multiple output files. Subsequent editing sessions serve to
update the processed data rather than generate additional
edited data files. 
<P>
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHORSHIP</H2>

David W. Caress (<A HREF="mailto:caress@mbari.org">caress@mbari.org</A>)
<BR>

<BR>&nbsp;&nbsp;Monterey&nbsp;Bay&nbsp;Aquarium&nbsp;Research&nbsp;Institute
<BR>

Dale N. Chayes (<A HREF="mailto:dale@ldeo.columbia.edu">dale@ldeo.columbia.edu</A>)
<BR>

<BR>&nbsp;&nbsp;Lamont-Doherty&nbsp;Earth&nbsp;Observatory
<P>
<A NAME="lbAG">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>-B</B>

<DD>
<I>yr/mo/da/hr/mn/sc</I>
<BR>

Sets the starting time for data allowed in the input data; pings
with times before the starting time will be ignored. 
Default: <I>yr/mo/da/hr/mn/sc</I> = 1962/2/21/10/30/0.
<DT><B>-D</B>

<DD>
Starts up the program in &quot;browse&quot; mode. If a file is opened
in browse mode (either at startup or later), none
of the edited data will be output to a file. The default
is to output the edited data to a file.
<DT><B>-E</B>

<DD>
<I>yr/mo/da/hr/mn/sc</I>
<BR>

Sets the ending time for data allowed in the input data; pings
with times after the ending time will be ignored. 
Default: <I>yr/mo/da/hr/mn/sc</I> = 2062/2/21/10/30/0.
<DT><B>-F</B>

<DD>
<I>format</I>
<BR>

Sets the format at startup for the input and output swath sonar data using 
<B>MBIO</B> integer format identifiers. This value can also be set
interactively when specifying the input file.
This program uses the <B>MBIO</B> library and will read any swath sonar
format supported by <B>MBIO</B>. A list of the swath sonar data formats
currently supported by <B>MBIO</B> and their identifier values
is given in the <B>MBIO</B> manual page.
Default: <I>format</I> = 11.
<DT><B>-G</B>

<DD>
This flag causes the program to treat the <B>Done</B> button as
equivalent to the <B>Quit</B> button. This option is used when
<B>MBedit</B> is started automatically by some other process and
only a single file is to edited.
<DT><B>-H</B>

<DD>
This &quot;help&quot; flag cause the program to print out a description
of its operation and then exit immediately.
<DT><B>-I</B>

<DD>
<I>infile</I>
<BR>

Sets the data file from which the input data will be read at startup.
This option is usually used only when <B>MBedit</B> is started
automatically from some other process. The <B>-F</B> option should
also be used to set the data format id. If the <B>-B</B> option is
not used to specify browse mode, then the edit save output file is
automatically set as <I>infile</I> with &quot;.esf&quot; appended.
<DT><B>-S</B>

<DD>
This flag modifies how the program handles an input data file
read at startup, as specified with the <B>-I</B> option. If the
<B>-S</B> flag is given and an edit save file exists for the
startup input data file, the edit save file will be used. 
<DT><B>-X</B>

<DD>
This option causes <B>mbprocess</B> to run automatically
on an input swath data file when the <B>mbedit</B> editing session
is completed. The <B>-X</B> option effectively means that the
corresponding processed swath data is generated or updated immediately.
The program <B>mbprocess</B> will not be invoked if the
editing session is in the browse mode.
<DT><B>-V</B>

<DD>
Normally, <B>MBedit</B> outputs information to the stderr stream
regarding the number of records loaded and dumped.  If the
<B>-V</B> flag is given, then <B>MBedit</B> works in a &quot;verbose&quot; mode and
outputs the program version being used, all error status messages, 
and a large amount of other information including all of the
beams flagged or zeroed.
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>INTERACTIVE CONTROLS</H2>

<DL COMPACT>
<DT><B>File</B>

<DD>
This button brings up a popup window which allows the user to
specify the input swath sonar bathymetry data file, its <B>MBIO</B>
format id, the output mode, and the output filename. 
This program uses the <B>MBIO</B> library and 
will read or write any swath sonar
format supported by <B>MBIO</B>. A list of the swath sonar data
formats currently supported by <B>MBIO</B> and their
identifier values is given in the <B>MBIO</B> manual page. 
If the swath sonar data file is named using the <B>MB-System</B>
suffix convention (format 11 files end with &quot;.mb11&quot;, format
41 files end with &quot;.mb41&quot;, etc.), then the program will
automatically use the appropriate format id; otherwise the
format must be set by the user.
The popup window also allows the output mode to be set to &quot;browse&quot;
so that no edit events are output. 
When a valid file is specified and the <B>OK</B> button
is clicked, as much data as will fit
into the data buffer are read and several pings are displayed as 
stacked bathymetry profiles.
<DT><B>View</B>

<DD>
This button accesses a pulldown menu with several toggle buttons: 
<B>Show Flagged Profile</B>, 
<B>Show Bottom Detect Algorithms</B>, 
<B>Wide Bathymetry Profiles</B>, 
<B>Plot Time Stamps</B>, 
<B>Plot Ping Interval</B>, 
<B>Plot Longitude</B>, 
<B>Plot Latitude</B>, 
<B>Plot Heading</B>, 
<B>Plot Speed</B>, 
<B>Plot Center Beam Depth</B>, 
<B>Plot Sonar Altitude</B>, 
<B>Plot Sonar Depth</B>, 
<B>Plot Roll</B>, 
<B>Plot Pitch</B>, and
<B>Plot Heave</B>.
The first two toggle buttons set simple display options
and may be set or unset individually.
The remaining toggle buttons control the display plot
modes; only one mode and therefore one toggle button may
be set at any time.
<DT><B>View-&gt;Show Flagged Profile</B>

<DD>
This toggle allows the user to specify whether the acrosstrack
bathymetry profile includes only the unflagged or &quot;good&quot; bathymetry
(toggle set to &quot;Off&quot;) or
whether the profile also includes the flagged or &quot;bad&quot; bathymetry
(toggle set to &quot;On&quot;). In
the latter case, red line segments show the portion of the profile
associated with the flagged depth points.
<DT><B>View-&gt;Show Bottom Detect Algorithms</B>

<DD>
This toggle allows the user to specify whether the beams are
colored according to their flagging status (toggle set to &quot;Off&quot;
or according to the bottom detect algorithm used by the sonar 
(toggle set to &quot;On&quot;). The default is to color each sounding
according to its flagging status - unflagged beams are black,
manually flagged beams are red, and filter flagged beams are
green. If the beams are colored according to bottom detect
algorithm, then amplitude detects are shown in black, phase
detects are shown in red, and beams for which the bottom
detection algorithm is unknown are shown in green. Users should
be aware that many swath data formats do not include bottom
detection algorithm information.
<DT><B>View-&gt;Wide Bathymetry Profiles</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display the widest
possible plots of the bathymetry profiles. All of the other options
discussed immediately below narrow the primary plot in order to
present additional information on the left side of the window.
<DT><B>View-&gt;Plot Time Stamps</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display time stamp
information to the left of the bathymetry profiles. 
<DT><B>View-&gt;Plot Ping Interval</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the time between pings.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Longitude</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
navigation longitude associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Latitude</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
navigation latitude associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Heading</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
heading associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Speed</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
speed associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Center Beam Depth</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
speed associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Sonar Depth</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
sonar depth associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Sonar Altitude</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
sonar altitude associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Roll</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
roll associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Pitch</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
pitch associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>View-&gt;Plot Heave</B>

<DD>
This toggle, when set, causes <B>mbedit</B> to display an
automatically scaled vertical time series plot of the 
heave associated with each ping.
<BR>&nbsp;This&nbsp;plot&nbsp;appears&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;bathymetry&nbsp;profiles.
<DT><B>Controls</B>

<DD>
This button accesses a pulldown menu with six items: 
<B>Go To Specified Time...</B>, <B>Buffer Controls...</B>, 
<B>Annotation...</B>, <B>Filters...</B>, 
<B>Reverse Right/Left Key Macros</B>, and
<B>Reverse Mouse Buttons</B>.
The first (top) four items bring up a dialog of
the same name. These dialogs are discussed below.
The last two items are toggle buttons which set mouse button
and key macro behaviors.
<DT><B>Controls-&gt;Go To Specified Time...</B>

<DD>
This menu item brings up a dialog which allows the user to
specify the time of a particular ping to be displayed.  Once the
year, month, day, hour, minute, and second values are entered, clicking
the <B>Apply</B> button causes <B>mbedit</B> to seek the specified
target time.  If the current data buffer begins after the target
time, an error is returned.  If the target time is later than the
end of the current data buffer, then <B>mbedit</B> will dump and
load buffers until the target time is reached or the data file ends.
If the end of the file is reached during the search, the file will
be closed.
<DT><B>Controls-&gt;Buffer Controls...</B>

<DD>
This menu item brings up a dialog which allows the user
to set the data buffer handling
through two sliders discussed immediately below.
<DT><B>Controls-&gt;Buffer Controls-&gt;Data Buffer Size</B>

<DD>
This slider on the <B>Buffer Controls</B> dialog
sets the number of data records which can be held
in the data buffer.  Any change becomes effective the next time
that a data file is read in.
<DT><B>Controls-&gt;Buffer Controls-&gt;Buffer Retain Size</B>

<DD>
This slider on the <B>Buffer Controls</B> dialog
sets the number of data records which are held over in
the buffer each time the old buffer is written out.
<DT><B>Controls-&gt;Annotation...</B>

<DD>
This menu item brings up a dialog which
allows the user to set the annotation intervals for
the across track distance and depth axes through the two sliders
discussed immediately below.
<DT><B>Controls-&gt;Annotation-&gt;X Axis Tick Interval</B>

<DD>
This slider on the <B>Annotation</B> dialog
sets the tick interval in m for the across track
distance axis.
If a particular value is desired which cannot be
obtained by dragging the slider, the slider
can be changed by increments of 1 by clicking with the left button
inside the slider area, but not on the slider itself.
<DT><B>Controls-&gt;Annotation-&gt;Y Axis Tick Interval</B>

<DD>
This slider on the <B>Annotation</B> dialog
sets the tick interval in m for the depth axis.
If a particular value is desired which cannot be
obtained by dragging the slider, the slider
can be changed by increments of 1 by clicking with the left button
inside the slider area, but not on the slider itself.
<DT><B>Controls-&gt;Filters</B>

<DD>
This menu item brings up a dialog which
allows the user to turn automatic bathymetry filtering algorithms
on and off and to set the filter parameters 
through the widgets discussed immediately below.
Clicking on the <B>Apply</B> button first removes any previous
automatic filter flags and then applies the current
filter settings to the swath bathymetry data. These actions
are applied only from the current position 
to the end of the data currently
in memory. The filtering is not applied (or unapplied) to
pings earlier in the data file than the current position.
The <B>Reset</B> button restores the filter settings that
were applied last.
<DT><B>Controls-&gt;Filters-&gt;Median Spike Fllter</B>

<DD>
This toggle button turns automatic median filtering of
bathymetry profiles on and off.
When median filtering is enabled, the median depth is
calculated for each bathymetry ping. Each sounding in the
ping is compared with the median value; any sounding that
differs from the median by a percentage 
greater than a threshold percentage
is flagged as bad data.
<DT><B>Controls-&gt;Filters-&gt;% Median Depth Threshold</B>

<DD>
This slider sets the threshold of the median depth
filter in units of percentage of the median depth.
<DT><B>Controls-&gt;Filters-&gt;Wrong Side Fllter</B>

<DD>
This toggle button turns automatic wrong side filtering of
bathymetry profiles on and off. This filter expects
bathymetry beams to be numbered from port to 
starboard. Any beam numbered less than the 
center beam with a positive
(starboard) acrosstrack distance is considered to
be on the &quot;wrong side&quot;, and any beam numbered higher than
the center beam with a negative (port) acrosstrack distance
is similarly regarded. For most swath data, the center
beam occurs near the midway point in the beam list. This
algorithm ignores apparent wrong side beams close to
the midway beam, where close is defined as being within
a threshold number of the midway beam.
<DT><B>Controls-&gt;Filters-&gt;Beams from Center Threshold</B>

<DD>
This slider sets the threshold of beam locations
checked by the wrong side filter. 
<DT><B>Controls-&gt;Filters-&gt;Flag by Beam Number</B>

<DD>
This toggle button turns automatic beam flagging by
beam number on and off. The flagging is controlled by
start and end beam number values (set by the two
sliders discussed immediately below). If the start beam
number is less than or equal to the end beam number, then
all beams between and including the start and end are
flagged, producing a flagged zone within the swath. If
the start beam number is greater than the end beam number,
then all beams before and including the end beam are flagged,
and all beams including and after the start beam are flagged.
This produces flagging of both swath edges.
<DT><B>Controls-&gt;Filters-&gt;Start Flagging Beam Number</B>

<DD>
This slider sets the beam number at which flagging by beam number starts. 
<DT><B>Controls-&gt;Filters-&gt;End Flagging Beam Number</B>

<DD>
This slider sets the beam number at which flagging by beam number ends. 
<DT><B>Controls-&gt;Filters-&gt;Flag by Distance</B>

<DD>
This toggle button turns automatic beam flagging by
acrosstrack distance on and off. The flagging is controlled by
start and end distance values (set by the two
sliders discussed immediately below). If the start distance
is less than or equal to the end distance, then
all beams with acrosstrack distances between 
the start and end distances are
flagged, producing a flagged zone within the swath. If
the start distance is greater than the end distance,
then all beams with acrosstrack distance less than 
the end distance are flagged,
and all beams with acrosstrack distance greater than 
the start distance are flagged.
This produces flagging of both swath edges.
<DT><B>Controls-&gt;Filters-&gt;Start Flagging Distance</B>

<DD>
This slider sets the beam number at which flagging 
by acrosstrack distance starts. 
<DT><B>Controls-&gt;Filters-&gt;End Flagging Distance</B>

<DD>
This slider sets the beam number at which flagging 
by acrosstrack distance ends. 
<DT><B>Controls-&gt;Reverse Right/Left Key Macros</B>

<DD>
This toggle button, when set, reverses the
key macros associated with flagging all beams
to the left or right of the last picked beam. This
means that the 'A', 'a', 'J', and 'j' keys will 
flag to the right rather than to the left. Similarly,
the  'D', 'd', 'L', and 'l' keys will flag to the
left rather than to the right. This option allows users
to conveniently handle swath bathymetry in which the
beams are mistakenly ordered starboard to port instead
of the usual port to starboard.
<DT><B>Controls-&gt;Reverse Mouse Buttons</B>

<DD>
This toggle button, when set, reverses the meaning of
the right and left mouse buttons. This option is for
the convenience of left-handed users.
<DT><B>Next Buffer</B>

<DD>
This button causes the program to write out the data from the
current buffer and then read in and display the next buffer.
If there is no more data to be read in after the current buffer
has been written out, then the input and output files are closed.
<DT><B>Done</B>

<DD>
This button causes the program to write out all of the data from the
input file and then close the input and output files.
<DT><B>Forward</B>

<DD>
This button causes the set of displayed pings to step <I>nstep</I> 
pings forward in the current buffer.  The right mouse button causes
the same action.
<DT><B>Reverse</B>

<DD>
This button causes the set of displayed pings to step <I>nstep</I> 
pings backward in the current buffer.  The middle mouse button causes
the same action.
<DT><B>Quit</B>

<DD>
This button causes the program to exit gracefully.  If a data file
has been read, all of the data will be written to the output file
before exiting.
<DT><B>About</B>

<DD>
This button causes the program to bring up a dialog showing the
program's name, version, and authors.
<DT><B>Acrosstrack Width</B>

<DD>
This slider sets the width of the plot in meters; in general this
value should be slightly larger than the swath width of the data
being edited. If a particular value is desired which cannot be
obtained by dragging the slider (e.g., the user wants a plot
width of 10 meters but the slider jumps from 1 to 47), the slider
can be changed by increments of 1 by clicking with the left button
inside the slider area, but not on the slider itself.
<DT><B>Vertical Exageration</B>

<DD>
This slider sets the depth scale in terms of vertical exageration.
The depth scale will change as the cross track distance scale is
changed to maintain the same vertical exageration.
If a particular value is desired which cannot be
obtained by dragging the slider, the slider
can be changed by increments of 0.01 by clicking with the left button
inside the slider area, but not on the slider itself.
<DT><B>Mode</B>

<DD>
This toggle allows the user to specify the edit mode.  If mode
is set to <I>Toggle</I>, then clicking the left mouse button will cause
the nearest beam to toggle between flagged and unflagged.  If mode
is set to <I>Pick</I>, then clicking the left mouse button will cause
the nearest unflagged beam to be flagged.  If mode
is set to <I>Erase</I>, then the cursor will change to an erasor and
any beam with the cursor while the left mouse button is held down
will be flagged.  If mode is set to <I>Restore</I>, the behavior will
be the same as for <I>Erase</I> except that the affected beams will be
unflagged instead of flagged. Info mode acts like pick mode, 
except that instead of flagging
the nearest sounding, the program displays information about the
selected ping and sounding above the bathymetry profile box. 
The edit mode can also be set using
key macros (see the keyboard action section):  
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>Toggle:<TT>&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>'Q',&nbsp;'q',&nbsp;'U',&nbsp;'u'&nbsp;<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>Pick:<TT>&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>'W',&nbsp;'w',&nbsp;'I',&nbsp;'i'&nbsp;<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>Erase:<TT>&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>'E',&nbsp;'e',&nbsp;'O',&nbsp;'o'&nbsp;<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>Restore:<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>'R',&nbsp;'r',&nbsp;'P',&nbsp;'p'&nbsp;<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>Info:<TT>&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>'T',&nbsp;'t',&nbsp;'{',&nbsp;'['&nbsp;<BR>
<DT><B>Unflag View</B>

<DD>
This button unflags all flagged beams among the currently
displayed pings. Pings in the buffer before or after the current 
display are unaffected.
<DT><B>Unflag Forward</B>

<DD>
This button  unflags all flagged beams among all pings from
the start of the current display to the end of the current
data buffer. Pings before the start of the current display are
unaffected.
<DT><B>Number of pings shown</B>

<DD>
This slider sets the number of pings shown at a time.
<DT><B>Number of pings to step</B>

<DD>
This slider sets the number of pings to step when the <B>Forward</B>
or <B>Reverse</B> buttons are pushed.
<P>
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>MOUSE ACTIONS</H2>

<DL COMPACT>
<DT><B>Left Mouse Button</B>

<DD>
The left mouse button is used to pick beams.  Good beams are
shown as filled black squares and bad (flagged) beams as unfilled red
or green squares.  The 
result of picking a particular beam depends on the current edit mode,
as set by the <B>Mode</B> button or keyboard macros defined below. The
last picked beam (and ping) is remembered for use with 
some of the keyboard actions described below.
<DT><B>Middle Mouse Button</B>

<DD>
The middle mouse button causes the set of displayed pings to step <I>nstep</I> 
pings backward in the current buffer.  The control button <B>Reverse</B> causes
the same action.
<DT><B>Right Mouse Button</B>

<DD>
The right mouse button causes the set of displayed pings to step <I>nstep</I> 
pings forward in the current buffer.  The control button <B>Forward</B> causes
the same action.
<P>
</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>KEYBOARD ACTIONS</H2>

<DL COMPACT>
<DT><B>'Z', 'z', 'M', or 'm'</B>

<DD>
<B>Bad Ping:</B>

Pressing one of these keys causes all of the beams in the last picked
ping to be flagged as bad.
<DT><B>'S', 's', 'K', or 'k'</B>

<DD>
<B>Good Ping:</B>

Pressing one of these keys causes all of the beams in the last picked
ping to be unflagged as good.
<DT><B>'A', 'a', 'J', or 'j'</B>

<DD>
<B>Left:</B>

Pressing one of these keys causes all of the beams including and to 
the left of the last picked beam to be flagged as bad.
<DT><B>'D', 'd', 'L', or 'l'</B>

<DD>
<B>Right:</B>

Pressing one of these keys causes all of the beams including and to 
the right of the last picked beam to be flagged as bad.
<DT><B>'!'</B>

<DD>
<B>Zero Ping:</B>

Pressing this key causes all of the beams in the ping 
associated with the last picked beam to be zeroed. This
should be used only for completely ridiculous values, as
the values are not recoverable.
<DT><B>'Q', 'q', 'U', or 'u'</B>

<DD>
<B>Toggle Mode:</B>

Pressing one of these keys sets the edit mode to &quot;toggle&quot; so that
clicking the left mouse button will cause
the nearest beam to toggle between flagged and unflagged.  
The edit mode can also be set using the <B>Mode</B> toggle buttons.
<DT><B>'W', 'w', 'I', or 'i'</B>

<DD>
<B>Pick Mode:</B>

Pressing one of these keys sets the edit mode to &quot;pick&quot; so that
clicking the left mouse button will cause
the nearest unflagged beam to be flagged.  
The edit mode can also be set using the <B>Mode</B> toggle buttons.
<DT><B>'E', 'e', 'O', or 'o'</B>

<DD>
<B>Erase Mode:</B>

Pressing one of these keys sets the edit mode to &quot;erase&quot; so that
clicking the left mouse button will cause
any beam under the cursor while the left mouse button is held down
to be flagged.
The edit mode can also be set using the <B>Mode</B> toggle buttons.
<DT><B>'R', 'r', 'P', or 'p'</B>

<DD>
<B>Restore Mode:</B>

Pressing one of these keys sets the edit mode to &quot;restore&quot; so that
clicking the left mouse button will cause any beam under the cursor 
while the left mouse button is held down to be unflagged.
The edit mode can also be set using the <B>Mode</B> toggle buttons.
<DT><B>'T', 't', '{', or '['</B>

<DD>
<B>Info Mode:</B>

Pressing one of these keys sets the edit mode to &quot;info&quot; so that
clicking the left mouse button will cause information about the
nearest beam to be displayed above the bathymetry profile box.
The edit mode can also be set using the <B>Mode</B> toggle buttons.
<P>
</DL>
<A NAME="lbAK">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="mbsystem.html">mbsystem</A></B>(l), <B><A HREF="mbprocess.html">mbprocess</A></B>(l), <B><A HREF="mbset.html">mbset</A></B>(l), 
<B><A HREF="mbclean.html">mbclean</A></B>(l), <B><A HREF="mbunclean.html">mbunclean</A></B>(l), <B><A HREF="mbinfo.html">mbinfo</A></B>(l)
<P>
<A NAME="lbAL">&nbsp;</A>
<H2>BUGS</H2>

This program is only fun when the data are good. The main
window for <B>mbedit</B> is too large for use on screens
smaller than 1024 X 768 pixels.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">VERSION</A><DD>
<DT><A HREF="#lbAD">SYNOPSIS</A><DD>
<DT><A HREF="#lbAE">DESCRIPTION</A><DD>
<DT><A HREF="#lbAF">AUTHORSHIP</A><DD>
<DT><A HREF="#lbAG">OPTIONS</A><DD>
<DT><A HREF="#lbAH">INTERACTIVE CONTROLS</A><DD>
<DT><A HREF="#lbAI">MOUSE ACTIONS</A><DD>
<DT><A HREF="#lbAJ">KEYBOARD ACTIONS</A><DD>
<DT><A HREF="#lbAK">SEE ALSO</A><DD>
<DT><A HREF="#lbAL">BUGS</A><DD>
</DL>
<HR>
</PRE>

<CENTER><P><BR>
Last Updated: 29 August 2001</P></CENTER>

<HR>
<P><A HREF="mbsystem_man_list.html">Return to list of MB-System manual pages...</A></P>
<P><A HREF="mbsystem_home.html"><IMG SRC="mbsystem_logo_small.gif" BORDER=0 HEIGHT=55 WIDTH=158 ALIGN=BOTTOM></A><A HREF="mbsystem_home.html">Back
to MB-System Home Page...</A></P>

</BODY>
</HTML>
