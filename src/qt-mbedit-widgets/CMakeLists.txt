#------------------------------------------------------------------------------
#    The MB-system:  CMakeLists.txt   27 June 2023
#
#    Copyright (c) 2023-2024 by
#    David W. Caress (caress@mbari.org)
#      Monterey Bay Aquarium Research Institute
#      Moss Landing, California, USA
#    Dale N. Chayes 
#      Center for Coastal and Ocean Mapping
#      University of New Hampshire
#      Durham, New Hampshire, USA
#    Christian dos Santos Ferreira
#      MARUM
#      University of Bremen
#      Bremen Germany
#      
#    MB-System was created by Caress and Chayes in 1992 at the
#      Lamont-Doherty Earth Observatory
#      Columbia University
#      Palisades, NY 10964
#
#    See README.md file for copying and redistribution conditions.
#------------------------------------------------------------------------------

find_package(
  Qt6
  COMPONENTS Gui Widgets Quick
  REQUIRED)

find_package(VTK ${MIN_VTK_VERSION} COMPONENTS GUISupportQtQuick)

if(CMAKE_SYSTEM_NAME STREQUAL Linux)
  message("Find TIRPC")
  find_package(TIRPC REQUIRED)
  message("Found TIRPC")  
else()
  add_library(TIRPC::TIRPC INTERFACE IMPORTED)
endif()

set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTORCC ON)
set(CMAKE_AUTOUIC ON)

message("In CMakeLists.txt!!! CMAKE_SOURCE_DIR=${CMAKE_SOURCE_DIR}")

add_executable(qt-mbedit-widgets main.cpp mainwindow.cpp mainwindow.h ClickableLabel.cpp mainwindow.ui)

message("qt-mbedit-widgets CMAKE_SOURCE_DIR= ${CMAKE_SOURCE_DIR}")

# If header directories specified with ${CMAKE_SOURCE_DIR}, qtcreator cannot
# find them!
target_include_directories(qt-mbedit-widgets PUBLIC ${CMAKE_SOURCE_DIR}/src/mbio/
                                     ${CMAKE_SOURCE_DIR}/src/mbaux
                                     ${CMAKE_SOURCE_DIR}/src/qt-guilib/u
                                     ${CMAKE_SOURCE_DIR}/src/mbedit)

target_link_libraries(qt-mbedit-widgets PRIVATE MBGui Qt6::Core Qt6::Widgets
                      Qt6::Quick VTK::GUISupportQtQuick
		      mbeditLib mbio
		      PUBLIC TIRPC::TIRPC)

install(TARGETS qt-mbedit-widgets DESTINATION ${CMAKE_INSTALL_BINDIR})
