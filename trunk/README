MB-SYSTEM VERSION 5.0.BETA23 README FILE:
----------------------------------------

This file is located at the top of the MB-System directory
structure. This directory structure contains the version 
5.0.beta23 release of the MB-System software package for 
processing and display of swath sonar data.  

MB-SYSTEM VERSION 5 DESCRIPTION:
-------------------------------

MB-System is a software package consisting of programs which
manipulate, process, list, or display swath sonar
bathymetry, amplitude, and sidescan data. This software is
distributed freely (and for free) in the form of source code
for Unix platforms. The heart of the system is an
input/output library called MBIO which allows programs to
work transparently with any of a number of supported swath
sonar data formats. This approach has allowed the creation
of "generic" utilities which can be applied in a uniform
manner to sonar data from a variety of sources. Most of the
programs are command-line tools, but the package does
include graphical tools for editing swath bathymetry,
editing navigation, modeling bathymetry calculation, and
adjusting survey navigation.

MB-SYSTEM VERSION 5 RELEASE DATES:
-----------------------------------------
Version 5.0.beta23     September 19, 2002
Version 5.0.beta22     August 30, 2002
Version 5.0.beta21     July 25, 2002
Version 5.0.beta20     July 20, 2002
Version 5.0.beta18     May 31, 2002
Version 5.0.beta17     May 1, 2002
Version 5.0.beta16     April 5, 2002
Version 5.0.beta15     March 26, 2002
Version 5.0.beta14     February 25, 2002
Version 5.0.beta13     February 22, 2002
Version 5.0.beta12     January 2, 2002
Version 5.0.beta11     December 20, 2001
Version 5.0.beta10     November 20, 2001
Version 5.0.beta09     November 6, 2001
Version 5.0.beta08     October 19, 2001
Version 5.0.beta07     August 10, 2001
Version 5.0.beta06     July 30, 2001
Version 5.0.beta05     July 23, 2001
Version 5.0.beta04     July 20, 2001
Version 5.0.beta03     July 19, 2001
Version 5.0.beta02     June 30, 2001
Version 5.0.beta01     June 8, 2001
Version 5.0.beta00     April 6, 2001

MB-SYSTEM AUTHORS:
-----------------
David W. Caress (caress@mbari.org)
Monterey Bay Aquarium Research Institute
7700 Sandholdt Road
Moss Landing, CA 95039

Dale N. Chayes (dale@ldeo.columbia.edu)
Lamont-Doherty Earth Observatory of Columbia University
Rte 9W
Palisades, NY 10964

MB-SYSTEM COPYRIGHT, LICENSING AND CAVEAT:
-----------------------------------------
MB-System Copyright (C) 1993-2002 by
David W. Caress (caress@mbari.org)
  Monterey Bay Aquarium Research Institute
  Moss Landing, CA 95039
Dale N. Chayes (dale@ldeo.columbia.edu)
  Lamont-Doherty Earth Observatory
  Palisades, NY 10964mbbackangle.manl
All Rights Reserved
All Wrongs Remembered

The MB-System source code is distributed under the GNU
General Public License as formulated by the GNU Project.
Previous MB-System distributions have been described as
"public domain", which meant there was no restrictions
whatsoever on the use of the code. We have now adopted the
more restrictive GNU GPL license in order to insure that
anyone who distributes software based in whole or in part on
MB-System also distributes the modified MB-System source
code and any additional source code.

The GNU GPL also prohibits the distribution of proprietary
executables linked with MB-System libraries unless the
source code is also distributed. We waive this restriction
on distributing proprietary compiled programs for specific
software products if and only if those software products
meet the following two conditions:
   1) The software product was created, sold, and
delivered to customers using source code derived from MB-
System release 4.6 distributions.
   2) The software product was sold and delivered to
customers prior to January 1, 2001.

The MB-System does not come with any warranties, nor is it
guarenteed to work on your computer or to do anything useful.  The
user assumes full responsibility for the use of this system.  In
particular, David W.  Caress, Dale N. Chayes, the Lamont-Doherty 
Earth Observatory of Columbia University, the Monterey Bay 
Aquarium Research Institute, or any other individuals or 
organizations involved in the design and maintenance of the 
MB-System software package are NOT responsible for any damage 
that may follow from correct or incorrect use of these programs.

MB-SYSTEM VERSION 5.0.BETA23 RELEASE NOTES:

The version 5.0.beta23 release of MB-System includes
some significant new features and bug fixes:
  - MB-System is now set to support arbitrary projected
    coordinate systems. In addition to the PROJ4 library
    that appeared in 5.0.beta22, MB-System now includes
    a list of dozens of common projected coordinate
    systems (e.g. UTM) in the file 
         mbsystem/share/Projections.dat
    This file specifies projections using the same
    syntax as in PROJ4 initialization files. The projections
    specified so far include UTM for all zones using both
    the WGS84 and the WGS72 ellipsoid, all state plane 
    projections in both the NAD83 and NAD27 datums, and
    over 1400 global projection systems defined by the
    EPSG.
  - Grids and mosaics produced by mbgrid and mbmosaic
    may be registered in any of the projected coordinate 
    systems specified in Projections.dat. The mechanism
    for producing projected grids is to use 
         -J Projection
    where Projection is one of the projection id tags in
    the Projections.dat file. For example, if one wants
    to produce a grid in UTM eastings and northings in 
    northern hemisphere zone 15, the command -JUTM15N
    will work.
  - A very crude mechanism for inverse projecting navigation
    in swath files has been implemented. The issue is 
    that some swath files have navigation in projected
    eastings and northings, but MB-System only works with 
    "real" navigation (longitude and latitude). In order
    to automatically apply an inverse projection to the
    navigation of a swath file named "mydata.mb131" as it 
    is read, place a file named "mydata.mb131.prj" in the
    same directory. This text file should contain only one 
    line with the relevant projection id tag (e.g. UTM15N).
    This approach will be augmented and perhaps replaced
    by command line arguments to some or all MB-System
    programs.
  - The NGDC binary hydrographic sounding format 
    (binary HYDRO93) is now supported as format 164.
  - A problem with the Simrad multibeam i/o modules
    that caused occasional segmentation faults when
    compiled with gcc has been fixed.
  - A problem that caused segmentation faults in
    mbedit has been fixed.

MB-SYSTEM VERSION 5.0.BETA22 RELEASE NOTES:

The version 5.0.beta22 release of MB-System includes
some significant new features and fixes:
  - The program mbedit can now show time series style
    plots of a variety of parameters to the left of
    the primary bathymetry profile plot. The values
    that can be displayed in this vertical wiggle
    plot are:
         Ping Interval
         Longitude
         Latitude
         Heading
         Speed
         Center Beam Depth
         Sonar Altitude
         Sonar Depth
         Roll
         Pitch
         Heave
  - The programs mbgrid and mbmosaic can now produce
    grids and mosaics in UTM eastings and northings.
  - The code from Gerald Evenden's PROJ library is now
    embedded in MB-System. This will in principle allow
    mbgrid and mbmosaic to generate outputs in a wide
    variety of projected coordinate systems.
  - The mbm_grdplot macro now handles UTM grids produced
    using mbgrid and mbmosaic.
  - Some minor bugs with mbvelocitytool have been fixed.
  - The i/o module for MGD77 data has been altered to 
    handle data in a not-quite-standard form generated
    at L-DEO.

MB-SYSTEM VERSION 5.0.BETA21 RELEASE NOTES:

The version 5.0.beta21 release of MB-System includes
some significant new features and fixes:
  - The program mbbackangle has been altered to produce
    multiple tables of amplitude vs. grazing angle for
    sidescan or amplitude spaced at regular intervals
    in the data. These tables are output to a single
    file named using the swath filename plus a ".sga"
    (sidescan) or ".aga" (amplitude). The program
    mbprocess can correct the sidescan and/or amplitude
    data by interpolating the amplitude vs. grazing 
    function for each ping. The parameter file is altered
    to enable sidescan or amplitude correction using
    the ".sga" or ".aga" file.
  - The old program mbbackangle used in the serial 
    processing model has been renamed mbbackangleold.
  - The behavior of grid weights in datalists has changed.
    Previously the first grid weight encountered had
    precedence over weights encountered further down the
    datalist tree. Now, the default behavior is for local
    grid weights to take precedence. This default behavior
    may be overridden by placing a $NOLOCALWEIGHT tag in an
    upper datalist. For all files and datalists encountered
    recursively below the tag, the first grid weight defined
    will be reported.
  - A bug in mbm_plot was fixed. Previously, default lonflip 
    settings other than 0 would cause plotting failure for 
    data outside the implied longitude bounds.

MB-SYSTEM VERSION 5.0.BETA20 RELEASE NOTES:

The version 5.0.beta20 release of MB-System includes
some significant new features and fixes:
  - Addition of read-only support for the Atlas
    SURF data format (id 181). The ability to
    write data read in SURF format will be added
    later (perhaps directly to SURF format, perhaps
    to another format).
  - The code for the SURF library is now part of
    the MB-System release.
  - The code for the PROJ library for geographic
    projections is now part of the MB-System release.
  - Sidescan correction for amplitude vs grazing 
    angle has been added to mbprocess.
  - The program mbbackangle now generates ".sga"
    files containing multiple tables of amplitude
    vs grazing angle for sidescan data. These files
    are used by mbprocess.
  - The old mbbackangle is now mbbackangleold.

MB-SYSTEM VERSION 5.0.BETA18 RELEASE NOTES:

The version 5.0.beta18 release of MB-System includes
some significant new features and fixes:
  - Addition of support for the French IFREMER
    MBB data format (id: 75). This is the current
    IFREMER multibeam archive format.
  - Fix for handling old Simrad multibeam data 
    (format 51). For eight years we have been 
    using the highest bit in the depth values 
    of old Simrad vendor format data for beam
    flagging. We have now been provided with a
    data sample in which the original depth values
    use that bit. Consequently, beam flagging is
    no longer supported in format 51 (EM100, EM1000,
    EM12 vendor format) data. Instead, beams
    flagged using mbedit or mbclean will be nulled.
    We recommend that any format 51 data be
    translated to the processing format 57 using
    mbcopy before editing or other processing is
    done.
  - MBinfo now has an option (-N) that will cause 
    it to generate "notices" in addition to the
    usual statistics. These notices include counts
    for all data record types in a file, counts of
    all nonfatal error messages generated reading 
    the file, and counts of data problems (e.g.
    obviously bad navigation or depth values)
    found in a file.
  - MB-System now allows identification and use of
    secondary navigation channels. Sometimes data
    loggers record more than one navigation stream,
    with one designated as the active or primary
    navigation. Normally all secondary navigation 
    channels are ignored. However, the -N option of
    mbinfo will now show when these navigation records
    (MB_DATA_NAV1, MB_DATA_NAV2, and/or MB_DATA_NAV3) 
    are present. MBnavlist can now be set to read from
    and output navigation from secondary channels using
    its -Nchannel option.
  - A variety of small fixes to the datalist parsing
    functions.

MB-SYSTEM VERSION 5.0.BETA16 RELEASE NOTES:

The version 5.0.beta16 release of MB-System includes
some significant new fixes and features:
  - Addition of "fast bathymetry" or "fbt" files
    to those generated by mbdatalist and mbprocess.
    If an "fbt" files exists, then mbgrid, 
    mbswath, and mbcontour will read it in lieu
    of the more voluminous and slow full data 
    files. This speeds gridding and mapmaking in
    the context of the overall mbprocess system.
  - Addition of "fast navigation" or "fnv" files
    to those generated by mbdatalist and mbprocess.
    If an "fnv" files exists, then mbcontour
    will read it in lieu of the more voluminous 
    and slow full data files. This speeds the 
    generation of trackplots in the context of 
    the overall mbprocess system.
  - Real support for tide corrections using mbset
    and mbprocess.
  - Static beam bathymetry corrections using
    mbprocess.
  - MBvelocitytool can now export bathymetry
    residuals as static bathymetry corrections
    applied by mbprocess. This allows one to
    correct bathymetry for certain classes of
    persistent artifacts.
  - MBvelocitytool will now attempt to estimate
    travel times and angles for bathymetry data
    that does not include travel times and 
    angles. This allows bad SVP artifacts in
    bathymetry without travel times to be modeled
    as bathymetry residuals, which in turn 
    can be applied to the bathymetry as static
    corrections using mbprocess.
  - Once again a fix for handling of SeaBeam 
    2120 multibeam data in the xse format.
    Maybe this time the sidescan will really
    stay the right way around!!

MB-SYSTEM VERSION 5.0.BETA15 RELEASE NOTES:

The version 5.0.beta15 release of MB-System includes
fixes to handling of SeaBeam 2120 data in the XSE
format 94 (the acrosstrack distance was flipped) and 
to the handling of Hydrosweep DS data in the URI
formats 23 and 25. The manual page for the MBIO 
library has finally been updated as well. The defining
and selection of tie points in mbnavadjust has been
made easier.

MB-SYSTEM VERSION 5.0.BETA14 RELEASE NOTES:
------------------------------------------

The version 5.0.beta14 release of MB-System includes 
fixes to handling of format 33 data (SeaBeam 2000
sidescan). Some format 33 files contain junk between
valid records, and the i/o module has to gracefully
skip the useless bytes. This release also contains
fixes to handling of comment records for a number
of data formats, particularly old SeaBeam Classic
formats.

MB-SYSTEM VERSION 5.0.BETA12 RELEASE NOTES:
------------------------------------------

The version 5.0.beta12 release of MB-System includes 
additional fixes to the i/o module handling SeaBeam 2120 
and ELAC Bottomchart MkII data in the XSE format.

MB-SYSTEM VERSION 5.0.BETA11 RELEASE NOTES:
------------------------------------------

The version 5.0.beta11 release of MB-System includes 
a new feature in mbprocess allowing a traveltime bias
problem in early Hydrosweep DS2 data to be fixed. This
correction is enabled using the KLUGE001 command. 
Version 5.0.beta11 also includes fixes to the i/o
module handling SeaBeam 2120 and ELAC Bottomchart MkII
data in the XSE format.

MB-SYSTEM VERSION 5.0.BETA10 RELEASE NOTES:
------------------------------------------

The version 5.0.beta10 release of MB-System includes 
new features for mbedit and mbset, fixes to mbprocess,
mbvelocitytool, and mbinfo, and changes to the
handling of default control parameters. 

The interactive bathymetry editor mbedit now includes 
an "info" mode that allows users to access timetag 
and navigation information about selected soundings. 

The program mbset, used to modify or create mbprocess 
parameter files, will now accept datalists as input. 

Prior to this release, the MB-System defaults set by
mbdefaults included the format id, a control for ping
averaging, longitude and latitude bounds for windowing by
area, and begin and end times for windowing in time. These
values are no longer set in the .mbio_defaults file or
controlled by mbdefaults. In MB-System 5.0 the format id is
automatically identified from the filename when possible.
When filenames do not match one of the recognized
structures, users must specify the format using the relevant
programs -Fformat option.  The controls for ping averaging
and windowing in time and space are rarely used, and must
now be explicitly set in command line arguments.

This release also includes significant bug fixes:
  - Handling of datalists in mbprocess
  - Specifying input swath files from the command
    line in mbvelocitytool
  - Using the -C option in mbinfo to print out both
    metadata tags and comments.

MB-SYSTEM VERSION 5.0.BETA09 RELEASE NOTES:
------------------------------------------

The version 5.0.beta09 release of MB-System includes 
fixes to the handling of bathymetry recalculation
by mbprocess. Earlier problems failed to document
or implement the angle handling modes used in
mbvelocitytool. The ANGLEMODE parameter can now
be set with mbset or mbvelocitytool, and will be
used by mbprocess.

MB-SYSTEM VERSION 5.0.BETA08 RELEASE NOTES:
------------------------------------------

The version 5.0.beta08 release of MB-System includes 
major fixes to the creation and handling of mbprocess
parameter files. Earlier versions set full or absolute
output file paths in the parameter files. The
consequence was that both processing and datalist
parsing could be broken if data files were moved.
All of the relevant programs now set and use relative
pathnames. Also, an option has been provided in
mbset to correct existing parameter files (see the
-L option in the mbset manual page).

MB-SYSTEM VERSION 5.0.BETA07 RELEASE NOTES:
------------------------------------------

The version 5.0.beta07 release of MB-System includes 
a number of small fixes related to processing of
EM120 data from the R/V Revelle.

MB-SYSTEM VERSION 5.0.BETA06 RELEASE NOTES:
------------------------------------------

The version 5.0.beta06 release of MB-System includes 
fixes to problems with the support for Elac Bottomchart
sonars in the XSE format (format 94) and SeaBeam 2100
sonars. Two new automatic filters have been added to
mbedit (flagging within specified ranges of beam numbers
or acrosstrack distances). Data cutting capability has
also been added to mbprocess, with parameter control
through mbset.

MB-SYSTEM VERSION 5.0.BETA04 RELEASE NOTES:
------------------------------------------

The version 5.0.beta04 release of MB-System includes 
one fix of a bug introduced into mbvelocitytool by
5.0.beta03 (the number of records read reported by the
program were incorrect). 

MB-SYSTEM VERSION 5.0.BETA03 RELEASE NOTES:
------------------------------------------

The version 5.0.beta03 release of MB-System includes 
bug fixes and incremental improvements relative to
the 5.0.beta01 release. In particular:
    - We now support reading of raw STN Atlas Hydrosweep DS2
      multibeam data as format 182. We also support processing
      of Hydrosweep DS2 data with format 183. These two
      i/o modules provide initial support for the upgraded
      multibeam on the R/V Maurice Ewing.
    - The program mbprocess now works with datalists. It
      descend through recursive datalists, processing only
      data files found to be out of date relative to the
      processing control files.
    - The programs mbedit and mbnavedit now behave properly
      when an input file is specified on the command line.
    - Many minor problems with the code that produced compiler
      warnings were identified and fixed.

There is a known major bug in this release:
    - The program mbvelocitytool exits with a segment fault
      when shutting down after processing data in format 94.

MB-SYSTEM VERSION 5.0.BETA01 RELEASE NOTES:
------------------------------------------

The version 5.0.beta01 release of MB-System includes 
bug fixes and incremental improvements relative to
the 5.0.beta00 release. In particular, the i/o modules
for data formats 56 (Simrad multibeam vendor format),
57 (Simrad multibeam processing format), and 94
(L3 Communications XSE vendor format for Elac Bottomchart
and SeaBeam multibeam sonars) contain important bug
fixes. Some additional features have been added to
mbprocess and mbset, including:
    - Insertion of formal metadata into processed files.
    - Application of time lag during navigation merging.
    - Application of lever arm correction to heave
      during recalculation of bathymetry (we are
      still testing this feature).
    - More flexible translation of bathymetry from
      "corrected" to "uncorrected" and vice versa.

MB-SYSTEM VERSION 5.0.BETA00 RELEASE NOTES:
------------------------------------------

The version 5.0 release of MB-System includes a number of
changes and improvements relative to the version 4 releases.
The most significant changes include:

A new approach to managing data processing.
- Many tools - one output file. 
    In previous versions of MB-System, each processing 
    program read an input swath data file and 
    produced an output swath data file. This "serial"
    processing scheme generally produced a large number of
    intermediate data files. MB-System version 5.0 features the
    integration of the editing and analysis tools with a single
    program, mbprocess, that outputs processed data files. The
    new "parallel" processing scheme covers bathymetry data
    processing, but does not yet incorporate the sidescan
    processing capabilities. All of the old tools and
    capabilities are still part of the distribution.
- Recursive datalists. 
    The lists of data files used by gridding and plotting 
    programs can now be recursive, making it simpler to manage 
    data from many different surveys.
- Automatic format identification. 
    MB-System programs will now attempt to automatically 
    identify the swath data format based on the filename suffix.
- Extended inf files. 
    Users can generate inf files by directing the output 
    of mbinfo to a file named by adding an
    ".inf" suffix to the swath data file name. Several programs
    can parse inf files, if they exist, to quickly obtain data
    locations or ranges. This feature speeds operations such as
    gridding, mosaicing, and automated plotting.

New tools.
- mbnavadjust. 
    This new tool allows users to adjust poorly
    navigated surveys by matching features in overlapping
    swathes. It is particularly useful for processing surveys
    conducted from submerged platforms.
- mbprocess. 
    This new tool performs a variety of processing
    tasks and produces a single output processed swath data
    file. The program mbprocess can apply bathymetry edits from
    mbedit and mbclean, navigation edits from mbnavedit, sound
    velocity profile changes from mbvelocitytool, and a variety
    of other corrections.
- mbset. 
    This new tool allows users to create and modify the
    parameter files used to control the operation of mbprocess.

Restructuring the code.
- All of the C code now conforms to the ANSI C standard.
- The underlying input/output library (MBIO) has been
    substantially rewritten. The structure has been streamlined,
    simplifying both future development and support of the
    existing code. The MBIO API has been greatly modified.

Handling of old Simrad multibeam data.
- Vendor format data from the old Simrad multibeams (pre-
    1997 sonars) are now supported by a single format id (51)
    rather than a separate format id for each sonar model. The
    old format id's are automatically aliased to 51, so existing
    shellscripts will continue to work.
- Sidescan data from old Simrad multibeams (pre-1997 sonars)
    are now handled in the same manner as data from the newer
    sonars (e.g. EM3000, EM3000, EM120). The raw samples in the
    vendor data format are binned, averaged, and interpolated
    into a 1024 pixel sidescan swath. This binned sidescan is
    not saved in the vendor format, so it is recommended that
    the data be copied to an extended format (57) that stores
    both bathymetry beam flags and processed sidescan. Format 57
    is also used for processing data from the current Simrad
    multibeam sonars.

-------------------------------------------
THE NEW VERSION 5 DATA PROCESSING STRUCTURE
-------------------------------------------

Previous versions of MB-System have emphasized processing
utilities that operate serially, that is, that read in an
input swath data file, modify it, and then output a second
swath data file. Serial processing utilities do allow for
great flexibility in processing because one uses only the
programs required and, in general, the order in which the
programs are used does matter. However, one consequence of
serial processing has been that processing data frequently
results in a large number of intermediate data files. For
instance, if an EM300 data file called "mbari_1998_524.mb57"
has spikes in the bathymetry, outliers in the navigation,
a strong high amplitude peak in the central sidescan swath,
and the bathymetry has been calculated using an incorrect
model for the water sound speed structure, users of MB-
System would previously have processed it with a sequence
something like this:

   1) Run mbclean to automatically flag
      the obvious bathymetric artifacts.
	  Input:  mbari_1998_524.mb57
	  Output: mbari_1998_524_c.mb57

   2) Run mbedit to interactively flag
      bathymetric artifacts.
	  Input:  mbari_1998_524_c.mb57
	  Output: mbari_1998_524_ce.mb57

   3) Run mbnavedit to interactively clean
      the navigation.
	  Input:  mbari_1998_524_ce.mb57
	  Output: mbari_1998_524_cen.mb57

   4) Run mbvelocitytool to generate an
      appropriate sound velocity profile (SVP) for
      recalculating the bathymetry.
	  Input:  mbari_1998_524_cen.mb57
	  Output: good.svp

   5) Run mbbath to recalculate the
      bathymetry using the SVP file generated
      using mbvelocitytool.
	  Input:  mbari_1998_524_cen.mb57
	  Input:  good.svp
	  Output: mbari_1998_524_cenb.mb57

   6) Run mbsimradmakess to recalculate the
      sidescan while ignoring sidescan samples
      from beams now flagged as bad.
	  Input:  mbari_1998_524_cenb.mb57
	  Output: mbari_1998_524_cenbs.mb57

   7) Run mbbackangle to calculate an amplitude
      vs grazing angle table for correcting
      sidescan.
	  Input:  mbari_1998_524_cenbs.mb57
	  Output: ampvsga.dat

   8) Run mbanglecorrect to correct the sidescan.
	  Input:  mbari_1998_524_cenbs.mb57
	  Input: ampvsga.dat
	  Output: mbari_1998_524_cenbsc.mb57

The result of this processing includes the input swath data
file, the final swath data file, and five intermediate
swath data files. The impact of this approach on data
storage requirements is obvious (though some users have
ameliorated the issue by working with scripts that
automatically delete unneeded data files or by piping data
from one non-graphical process to another to avoid making
intermediate files). The serial processing approach also
presents data management problems because data files
frequently have different processing requirements, even
within a single survey. We have found that working with very
large datasets can be awkward when only a minority of data
files require navigation editing or bathymetric
recalculation, or when some data files require multiple
episodes of bathymetry and navigation editing.

MB-System version 5 includes new utilities implementing a
parallel processing scheme that simplifies the processing of
most swath data. This scheme is centered around the program
mbprocess, which can accomplish the following processing
tasks in a single step:
   - Merge edited navigation generated by mbnavedit.
   - Apply bathymetry edit flags from mbedit
     and mbclean
   - Recalculate bathymetry from raw travel time and
     angle data by raytracing through water sound speed
     models from mbvelocitytool or mbsvplist.
   - Apply changes to roll bias, pitch bias, heading
     bias, and draft values.
   - Recalculate sidescan from raw backscatter samples
     (Simrad multibeam data only).
   - Correct sidescan for amplitude vs grazing angle
     patterns.
   - Apply tides to bathymetry.
The actions of mbprocess are controlled by text parameter
files. Each mbprocess parameter file is named by adding a
".par" suffix to the associated input swath data file and
contains single line commands that set processing modes and
parameters. Tools such as mbedit, mbnavedit, and mbclean all
generate and/or modify parameter files in addition to
generating parallel files used by mbprocess. The program
mbset can also be used to create and modify mbprocess
parameter files.

The same processing steps described above as a serial
processing scheme can be accomplished with the new parallel
processing scheme as follows:

   1) Run mbdatalist to create ancillary
      data files containing statistics 
      (".inf"), quickly read bathymetry
      (".fbt"), and quickly read navigation
      (".fnv"). These files are used to
      speed common operations such as swath
      plotting and gridding.
	  Input:  mbari_1998_524.mb57
	  Output: mbari_1998_524.mb57.inf
		  mbari_1998_524.mb57.fbt
		  mbari_1998_524.mb57.fnv

   2) Run mbclean to identify
      the obvious bathymetric artifacts
      and output a list of the edit events.
      The parameter file is created and
      set to apply bathymetry flags from
      the ".esf" file.
	  Input:  mbari_1998_524.mb57
	  Output: mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.par

   3) Run mbedit to interactively
      identify bathymetric artifacts
      and output a list of the edit events.
      The existing edits from mbclean
      are loaded and applied prior to editing.
      The parameter file is updated and
      set to apply bathymetry flags from
      the ".esf" file.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.par

   4) Run mbnavedit to interactively
      clean the navigation. The edited
      navigation is output to the ".nve" file.
      The parameter file is updated and
      set to merge the navigation from
      the ".nve" file.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.nve
		  mbari_1998_524.mb57.par

   5) Run mbvelocitytool to generate an
      an appropriate sound velocity profile
      (SVP) for recalculating the bathymetry.
      The SVP is output to the ".svp" file.
      The parameter file is updated and
      set to recalculate the bathymetry by
      raytracing through the SVP model from
      the ".svp" file.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.svp
		  mbari_1998_524.mb57.par

   6) Run mbbackangle to generate an
      a set of amplitude vs grazing angle
      tables at regular intervals in the
      data. These tables are placed into
      a single ".sga" file. The parameter 
      file is updated and set to correct 
      the sidescan by interpolating the 
      amplitude vs grazing angle table for 
      each ping.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.sga
		  mbari_1998_524.mb57.par

   7) Run mbset to set the parameter file
      so that mbprocess will recalculate
      the sidescan (this is for Simrad
      multibeam data only) while ignoring
      sidescan samples from beams now flagged
      as bad.
	  Input:  mbari_1998_524.mb57.par
	  Output: mbari_1998_524.mb57.par

   8) Run mbprocess to apply the bathymetric
      edits, merge the cleaned navigation,
      recalculate the bathymetry, recalculate
      the sidescan, and correct the sidescan. 
      The processed swath data is written to 
      an output swath data file. The usual
      ancillary data files containing statistics,
      quickly read bathymetry, and quickly
      read navigation are also created.
	  Input:  mbari_1998_524.mb57
		  mbari_1998_524.mb57.esf
		  mbari_1998_524.mb57.nve
		  mbari_1998_524.mb57.svp
		  mbari_1998_524.mb57.aga
		  mbari_1998_524.mb57.par
	  Output: mbari_1998_524p.mb57
	          mbari_1998_524p.mb57.inf
	          mbari_1998_524p.mb57.fbt
	          mbari_1998_524p.mb57.fnv

The result of this processing is a single output swath data
file. Moreover, the processed output can be easily updated
if, for example, additional bathymetry editing is required.
If the mbedit program is used again, it will load the
existing edit events from the ".esf" file and then update
the ".esf" file. To incorporate the updated bathymetry
edits, one just runs mbprocess again. One can similarly
change the SVP file without impacting on the bathymetry
editing or navigation editing components of the processing.

All of the old, serial processing utilities are still
distributed with MB-System. However, some of the serial
tools have been replaced by new versions of the same name
(e.g. mbedit, mbclean, mbbackangle, and mbnavedit).  In 
these cases, the old versions are preserved as programs 
with "old" added to their names (e.g. mbeditold, mbcleanold, 
mbbackangleold, and mbnaveditold). 

OTHER REQUIRED AND SUGGESTED SOFTWARE AND DATA
----------------------------------------------

MB-System requires a number of other software packages 
and databases to be fully functional. These are:

- GMT version 3.0 or later: MB-System makes use of the Generic Mapping Tools (GMT)
     libraries and programs for much of its graphics. GMT also includes a detailed global
     coastline database. GMT has been developed by Professor Paul Wessel of SOEST (School
     of Ocean and Earth Science and Technology at the Univeristy of Hawaii) and Dr. Walter
     H. F. Smith of NOAA. The GMT source code is available from the GMT web page. Use of
     GMT version 3.2 is strongly recommended. 
- NetCDF version 2.3r2 or later: Both GMT and MB-System require the NCAR netCDF
     library. 
- Perl version 4.0r19 or later: Perl is a fast, well documented scripting language used widely
     in the Unix world. MB-System contains a number of perl scripts used both for installation
     and to ease common tasks. Most of the current Unix operating systems include perl. If you
     need to obtain the perl source code, first check with your local system administrator - you
     will probably find perl already available locally. The perl source code can be obtained from
     the GNU Project software archive of the Free Software Foundation. 
- Motif: The interactive graphical utilities in MB-System (e.g. data editors) use the Motif
     widget set, and Motif-compatible libraries or equivalent are required for these utilities to
     be built and to run. Most current Unix operating systems include the required Motif
     libraries. If you do not have these libraries, there are options. The libraries can be
     purchased from one of several vendors. An open source Motif-compatible distribution
     called LessTif has been available for some time, and works well with MB-System. Most
     significantly, the Motif source itself has been released as open source and free, compiled
     versions are now available through Motifzone for most Unix platforms. 
- Levitus Database: The MB-System program mblevitus depends on a 16 MByte data file
     that is not included in the MB-System tarfile. Click here to ftp this file. Be sure to
     uncompress the file and to set the "LEVITUS" flag in the install_makefiles appropriately,
     as described below in the installation section. 

MB-System produces Postscript based graphics. Most current Unix operating systems provide a
program which serves as a screen-based Postscript viewer. If you do not have a Postscript viewer,
one option is to obtain the Ghostscript package from the Free Software Foundation.

- Ghostview: "Free" screen Postscript viewer. The source code can be obtained from the
     GNU Project software archive of the Free Software Foundation. 

HOW TO INSTALL MB-SYSTEM:
------------------------

The MB-System source code is extracted by first uncompressing the tar file and then running tar:
     % uncompress MB-System.tar.gz
     % tar xvf MB-System.tar

This will create a directory structure called mbsystem. In order to configure your installation,
you must edit the shellscript mbsystem/install_makefiles. This is perl script will read template
makefiles in the MB-System source directories and create makefiles with the correct attributes.
This enables users to install MB-System without having to edit the makefiles. Instead of editing
the makefiles directly, the installer should edit this script so that the locations of important
libraries and include files are accurate and so that the compile and link flags are correct.

The important parameters to be set in install_makefiles are:

     MBSYSTEM_HOME - Absolute path to the directory containing this file. 
     OS Operating system - (e.g. SUN, IRIX, HPUX, LINUX, LYNX). 
     BYTESWAPPED - If set to "YES" will enable byte swapping of input and output binary
     data. Otherwise byte swapping is disabled. Byte swapping needs to be enabled when
     installing on "little endian" machines such as PCs or VAXs. 
     CC - C compiler to be used (optional). 
     CFLAGS - Compile flags for C source files. 
     LFLAGS - Load flags for all object files. 
     GRAPHICAL - If set to "YES" will enable the installation of the Motif based graphical
     utilities mbedit, mbnavedit, and mbvelocitytool. If Motif is not available but the
     nongraphical utilities are desired then disable with "NO" (optional, default is "YES"). 
     MOTIFINCDIR - Location of Motif include files. 
     MOTIFLIBS - X and Motif libraries required for graphical tools. 
     GMTVERSION - GMT version used. GMT version 3.2 is used by default; this parameter
     must be set to "3.0" or "3.1" to successfully link with libraries from either of those
     versions. 
     GMTLIBDIR - Location of GMT libraries libgmt.a and libpsl.a 
     GMTINCDIR - Location of GMT include files gmt.h, grd.h, and pslib.h 
     NETCDFDIR - Location of NetCDF library libnetcdf.a 
     LEVITUS - Path for Levitus data file annual. 

Examples of appropriate values for several different installations (e.g. Sun, SGI, PC) are included
in the comments in install_makefiles. To execute install_makefiles, do the following:

     % cd mbsystem 
     % install_makefiles

Because install_makefiles is a perl script, the executable perl must be available in the installer's
path. Once install_makefiles has been correctly configured and run, give the command "make all"
to generate the executable programs:

     % make all

The make command will descend recursively down through the directory structure, compiling
source files, linking object files, and copying executables and manual pages to the appropriate
directories. The executables will be placed in mbsystem/bin, the libraries in mbsystem/lib, and
the manual pages in mbsystem/man/man1.

Naturally, in order for users to use the MB-System utilities, the directory containing the
executables must be included in their path (usually this is done by editing the .cshrc file in the
user's home directory). The executable perl must also be available in the user's path for most of
the macros to work.

Most users will also wish to specify which program they generally use to view Postscript plots on
their screen. This parameter can be set either with the mbdefaults program or using the
PS_VIEWER environment variable - the former is recommended (see the mbdefaults manual
page for details). On Sun workstations pageview is a popular Postscript viewer; on Silicon
Graphics machines xpsview is commonly used. A popular generic alternative to these platform
specific programs is ghostview.

 
WEB BASED DOCUMENTATION:
------------------------
The html documentation consists of a number of html
documents and images in the directory mbsystem/html.
This documentation also comprises the MB-System
web page available from the Lamont web site at:
	http://www.ldeo.columbia.edu
and the MBARI web site at:
	http://www.mbari.org
Users can access the documentation in their own MB-System
installation by using a web browser and accessing the file:
	file:/usr/local/mbsystem/html/mbsystem_home.html
(here it is assumed that MB-System has been installed
in /usr/local). Currently, the documentation includes some
general information about MB-System (e.g. who wrote, how to
get it, how to install it) and a complete set of manual
pages. In the future we will add increasing amounts of 
information including examples of using MB-System.

CONTINUED SUPPORT:
-----------------
We are pleased to have received an additional five years 
(2001-2005) of NSF funding for the support and development 
of MB-System.  This project is also supported by the 
Monterey Bay Aquarium Research Institute.

CONTRIBUTIONS: 
--------------
We are actively soliciting contributions for inclusion in the
MB-System. In particular support for additional data formats in the
mbio.a library would be helpful, as would new, clever 
tools for data manipulation and processing.  We thank 
those who have already contributed to MB-System.

SUGGESTIONS:
------------
We are interested in your suggestions.

BUGS:
-----
There are undoubtably bugs in this software. Although we
make no promises about how rapidly problems will be fixed, we
strongly encourage users to notify us of bugs (and fixes!!).
We will continue to support this software for the forseeable
future.

ACKNOWLEDGMENTS:
----------------
A number of people have made contributions to the code
included in MB-System.  These include:
    Suzanne O'Hara (Lamont-Doherty Earth Observatory) 
    Daniel Scheirer (Brown University) 
    Paul Cohen (SeaBeam Instruments, now Fidelity Investments) 
    Steve Dzurenko (SeaBeam Instruments, now University of Texas) 
    Peter Lemmond (Woods Hole Oceanographic Institution) 
    David Brock (formerly with Antarctic Support Associates) 
    Alberto Malinverno (Lamont-Doherty Earth Observatory, later at
    Schlumberger-Doll) 
    Russ Alexander (formerly with UCSB) 

Numerous users and vendors have provided information regarding 
data file formats and sonar system specific characteristics.

Good mapping!!

Dave Caress caress@mbari.org
Dale Chayes dale@ldeo.columbia.edu

------------------------------------------------------------------------

RCS ID: $Id: README,v 5.26 2002-09-19 22:24:55 caress Exp $

Revision History:
$Log: not supported by cvs2svn $
Revision 5.25  2002/09/19 17:31:21  caress
Release 5.0.beta23

Revision 5.24  2002/08/30 19:37:35  caress
Release 5.0.beta22

Revision 5.23  2002/08/28 01:43:27  caress
Release 5.0.beta22

Revision 5.22  2002/08/21 01:10:37  caress
Release 5.0.beta22
./

Revision 5.21  2002/07/25 19:11:35  caress
Release 5.0.beta21

Revision 5.20  2002/07/20 21:08:07  caress
Release 5.0.beta20

Revision 5.19  2002/05/31 19:58:28  caress
Release 5.0.beta18

Revision 5.18  2002/05/29 20:43:56  caress
Release 5.0.beta18

Revision 5.17  2002/04/06 03:10:12  caress
Release 5.0.beta16

Revision 5.16  2002/03/26 07:40:25  caress
Release 5.0.beta15

Revision 5.15  2002/02/26 07:59:33  caress
Release 5.0.beta15

Revision 5.14  2002/01/02 20:33:36  caress
Set real data of 5.0.beta12

# Revision 5.13  2001/12/30  20:31:31  caress
# Release 5.0.beta12
#
Revision 5.12  2001/11/20 22:11:20  caress
Release 5.0.beta09

# Revision 5.11  2001/11/16  20:14:47  caress
# Release 5.0.beta10
#
Revision 5.10  2001/11/07 01:57:54  caress
Fixed for release 5.0.beta09

# Revision 5.9  2001/11/07  01:15:08  caress
# Release 5.0.beta09
#
# Revision 5.8  2001/10/19  19:49:08  caress
# Release 5.0.beta08
#
# Revision 5.7  2001/08/10  23:10:08  dcaress
# Release 5.0.beta07
#
Revision 5.6  2001-07-30 17:51:15-07  caress
Release 5.0.beta06

# Revision 5.5  2001/07/27  19:28:38  caress
# Release 5.0.beta06.
#
# Revision 5.4  2001/07/20  16:48:26  caress
# Release 5.0.beta04
#
# Revision 5.3  2001/06/08  21:39:07  caress
# Version 5.0.beta01
#
# Revision 4.22  2000/09/26  20:32:27  caress
# Fixed reference to ftp site.
#
# Revision 4.21  2000/03/08  01:19:08  caress
# Release 4.6.10
#
# Revision 4.20  1999/09/16  23:09:54  caress
# Real version 4.6.6 release notes
#
# Revision 4.19  1999/09/15  21:29:37  caress
# Version 4.6.6 Release Notes
#
# Revision 4.18  1999/05/07  00:30:38  caress
# Version 4.6a release
#
# Revision 4.17  1999/04/16  00:26:05  caress
# Final 4.6 release?
#
# Revision 4.16  1998/12/17  23:09:42  caress
# MB-System version 4.6beta4
#
# Revision 4.15  1998/10/05  22:12:48  caress
# MB-System version 4.6beta
#
# Revision 4.14  1997/09/15  21:33:33  caress
# Fixed typo.
#
# Revision 4.13  1997/09/15  19:02:15  caress
# Real Version 4.5
#
# Revision 4.12  1997/04/21  16:51:19  caress
# MB-System 4.5 Beta Release.
#
# Revision 4.12  1997/04/17  17:37:59  caress
# MB-System 4.5 Beta Release.
#
# Revision 4.11  1996/09/05  12:57:11  caress
# Actual V4.4 release.
#
# Revision 4.10  1996/08/26  15:38:28  caress
# Release 4.4 revision.
#
# Revision 4.9  1996/01/26  21:32:53  caress
# Revision for real version 4.3 release.
#
# Revision 4.8  1995/08/17  16:34:39  caress
# Revision for release 4.3.
#
# Revision 4.7  1995/02/14  22:25:56  caress
# Version 4.2 Release
#
# Revision 4.6  1994/11/18  16:37:15  caress
# *** empty log message ***
#
# Revision 4.5  1994/10/21  21:54:24  caress
# Release V4.0
#
# Revision 4.4  1994/10/21  17:42:43  caress
# Release V4.0
#
# Revision 4.3  1994/10/21  13:29:54  caress
# Release V4.0
#
# Revision 4.2  1994/10/20  21:30:31  caress
# Release V4.0
#
# Revision 4.1  1994/08/03  21:00:43  dale
# Update for Beta issues......
#
# Revision 4.0  1994/03/05  23:06:24  caress
# Changes for release 4.0.
#
# Revision 3.7  1993/12/14  22:15:56  caress
# Changed for release version 3.4
#
# Revision 3.6  1993/11/06  21:24:39  caress
# Added discussion of src/realtime directory.
#
# Revision 3.5  1993/11/05  21:25:02  caress
# Added discussion of how to run make to generate the executables.
#
# Revision 3.4  1993/11/05  14:59:04  caress
# Some small changes by Dale.
#
# Revision 3.3  1993/11/04  17:46:36  caress
# Updated for version 3.3.  Added where to get required
# software packages and what Makefile to change to fit
# local environments.
#
# Revision 3.2  1993/08/25  14:41:41  dale
# Add porting, and requirements, and bugs and stuff for 3.2
#
# Revision 3.1  1993/04/22  16:09:21  dale
# Update and clarify the text, add third reason
#
# Revision 3.0  1993/04/22  16:04:29  dale
# *** empty log message ***
#

