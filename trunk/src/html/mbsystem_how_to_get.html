<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
  <title>How to Get and Install MB-System</title>
  <meta content="text/html" http-equiv="Content-Type">
  <meta content="MB-System: Mapping the Seafloor" name="Title">
  <meta content="David Caress, Dale Chayes" name="Author">
  <meta
 content="open source software for processing bathymetry and backscatter data from multibeam and sidescan sonar"
 name="Description">
  <meta
 content="seafloor,mapping,multibeam,sonar,bathymetry,sidescan,swath processing,open,source,software"
 name="Keywords">
</head>
<body alink="#cc9900" vlink="#997040" link="#336699" bgcolor="#ffffff"
 text="#000000">
<center>
  <dd><a name="MB-get"></a><b><font size="+2">How To Get The MB-System Source Distribution</font></b></dd>
</center>
<p>The source code for MB-System is available as a compressed tar
archive
by anonymous ftp to the Lamont-Doherty Earth Observatory of Columbia
University.
This archive file is about 3 megabytes in size and, depending on the
speed of your internet connection, may take a few minutes to transfer.</p>
<p>Click<a
 href="ftp://ftp.ldeo.columbia.edu/pub/MB-System/MB-System.tar.gz"> here to ftp</a> the current stable MB-System release as a compressed tar archive.</p>
<p>Click<a
 href="ftp://ftp.ldeo.columbia.edu/pub/MB-System/MB-SystemBeta.tar.gz"> here to ftp</a> the current unstable (&quot;beta&quot;) MB-System release as a compressed tar archive.</p>
<p>Click <a href="ftp://ftp.ldeo.columbia.edu/pub/MB-System">here to
get point-and-click ftp access</a> to all of the MB-System related
files
available from Lamont (these may include data examples and beta
distributions
of MB-System ).</p>
<p>If access through the above links fails, try running ftp from a
terminal shell.
The following commands represent a typical anonymous ftp session (note
that
your@email.address literally means to enter your email address, and that many modern ftp clients do not require the &quot;binary&quot; command).</p>
<ul>
  % ftp ftp.ldeo.columbia.edu<br>
Name: anonymous<br>
Password: your@email.address<br>
&gt; cd pub/MB-System<br>
&gt; binary<br>
&gt; get MB-System.tar.gz<br>
&gt; quit<br>
</ul>
If anonymous ftp fails with an error message like: "Sorry no DNS entry"
after the email address is entered as the anonymous password, this
means that the internet address (also called IP address) of the
computer in use is
not known to the Lamont network to be legitimate. As a security
measure,
illegitimate IP addresses are not allowed to connect to the Lamont
network.
The Lamont ftp server attempts to look up or resolve IP addresses using
the primary Domain Name Service (DNS) servers associated with the
internet as a whole. So, this problem arises when computers use IP
addresses are not properly registered with the global DNS servers. This
situation sometimes
exists for computers connecting through improperly configured firewalls
or Network Address Translation (NAT) devices. Users facing this issue
can often
succeed by running ftp from a "better connected" server in their
organization. Otherwise, they will need to contact their internet
service
provider or their network/computing support staff.
<center>
<p></p>
<hr width="67%">
</center>

<center><a name="MB-dist"></a><b><font size="+2">Packaged MB-System Distributions</font></b></dd>
</center>
<p>MacOs X:</p>
<blockquote>
  <p>MB-System has been packaged for MacOS X as part of the <a href="http://www.finkproject.org/">Fink Project</a>. The <a href="http://pdb.finkproject.org/pdb/package.php/mbsystem">MB-System fink package</a> is maintained by <a href="http://vislab-ccom.unh.edu/~schwehr/">Kurt Schwehr</a> of CCOM/JHC UNH.</p>
</blockquote>
<p>Poseidon Linux:</p>
<blockquote>
  <p>MB-System is included in  <a href="https://sites.google.com/site/poseidonlinux/">Poseidon Linux</a>, an Ubuntu Linux based distribution that is pre-loaded with a number of software packages used for scientific research.</p>
</blockquote>
<center>
  <p></p>
  <hr width="67%">
  <p></p>
</center>

<center><dd><a name="MB-required"></a><b><font size="+2">Other Required
and
Suggested Software and Data</font></b></dd>
</center>
<p>MB-System requires a number of other software packages and databases
to be fully functional. These are:</p>
<ul>
  <li><b>GMT</b> version 4.2.0 or later: MB-System makes use of the
Generic
Mapping Tools (GMT) libraries and programs for much of its graphics.
GMT
also includes a detailed global coastline database. GMT has been
developed
by Professor Paul Wessel of SOEST (School of Ocean and Earth Science
and
Technology at the Univeristy of Hawaii) and Dr. Walter H. F. Smith of
NOAA.
The GMT source code is available from the <a
 href="http://gmt.soest.hawaii.edu/">GMT
web page</a>.</li>
  <li><b>NetCDF</b> version 3.5.1 or later: Both GMT and MB-System
require
the <a href="http://www.unidata.ucar.edu/software/netcdf/">NCAR
netCDF
library</a>.</li>
  <li><b>Perl</b> version 5.0 or later: Perl is a fast, well
documented
scripting language used widely in the Linux/Unix world. MB-System contains a
number of perl scripts used both for installation and to ease common
tasks. Most of the current Unix operating systems include perl. If 
you need to obtain the perl source code, first check with your local 
system administrator - you will probably find perl already available 
locally. The perl source code can be obtained from the 
<a href="http://www.gnu.org/directory">GNU
software archives</a> of the <a href="http://www.gnu.org">Free
Software Foundation</a>.</li>  
  <li><b>X11</b>: The interactive graphical utilities in MB-System (MBedit, MBnavedit, MBvelocitytool, MBgrdviz, MBeditviz) use and require the X11 windowing system. </li>
  <li><b>Motif</b>: The interactive graphical utilities in MB-System (MBedit, MBnavedit, MBvelocitytool, MBgrdviz, MBeditviz) use version 2 of the Motif widget set, and Motif libraries
    are required for these utilities to be built and to run.
    Most current Unix/Linux operating systems include the required Motif
    libraries, either in the original proprietary form (Motif), or the not-quite-open-source form (OpenMotif). If you do not have these libraries, the OpenMotif 2 source is available through 
    <a href="http://www.openmotif.org/">Motifzone</a>. An old alternative open source Motif-compatible
    distribution called <a href="http://www.lesstif.org">LessTif </a>does not work with the new OpenGL based MB-System programs (MBgrdviz, MBeditviz) and should be avoided. </li>
  <li><b>Levitus Database</b>: The MB-System program mblevitus depends
on
a 16 MByte data file that is not included in the MB-System tarfile.
Click
    <a href="ftp://ftp.ldeo.columbia.edu/pub/MB-System/annual.gz">here</a>
to ftp this file. Be sure to uncompress the file and to set the
"LEVITUS"
flag in the install_makefiles appropriately, as described below in the
installation section.</li>
  <li><strong>FFTW</strong>: The &quot;Fastest Fourier Transform in the West&quot; package is used by the sonagram calculation program MBbsegypsd to calculate, well, Fast Fourier Transforms. <a href="http://www.fftw.org/">FFTW</a> is commonly used and thus available on or for most current Unix operating systems.</li>
  <li><strong>OTPSnc</strong>: The Oregon State Ocean Tide Prediction Software package is required for the tidal modeling program MBotps (which in fact is just a convenient front end for the old-style-batch interface of OTPS). The OTPSnc package can be obtained from the<a href="http://www.oce.orst.edu/research/po/research/tide/"> tidal modeling group</a> at <a href="http://www.oce.orst.edu/">Oregon State University</a> from <a href="http://www.coas.oregonstate.edu/research/po/research/tide/region.html">this page</a>.</li>
</ul>
<p>MB-System produces Postscript based graphics. Most current Unix
operating
systems provide a program which serves as a screen-based Postscript
viewer.
If you do not have a Postscript viewer, one option is to obtain one of
several Ghostscript-based
packages from the Free Software Foundation.</p>
<ul>
  <li><b>ghostview</b>:&nbsp;Open source screen Postscript viewer. The
source code can be obtained from the <a
 href="http://www.gnu.org/directory">GNU
software archives</a> of the <a href="http://www.gnu.org">Free
Software
Foundation</a>.</li>
</ul>
<ul>
  <li><b>gv</b>:&nbsp;Open source screen Postscript viewer. This
package is a bit more sophisticated than ghostview and can handle
poster-sized plots. The
source code can be obtained from the <a
 href="http://www.gnu.org/directory">GNU
software archives</a> of the <a href="http://www.gnu.org">Free
Software
Foundation</a>.</li></ul>
<p>Users of MacOs X should note that many of the above packages can be
painlessly installed using the fink package available from the
<a href="http://fink.sourceforge.net/">Fink Project</a>.</p>
<center>
<p></p>
<hr width="67%">
</center>
<center>
<p><a name="MB-install"></a><b><font size="+2">How to Install MB-System</font></b></p>
</center>
<p>The MB-System source code is extracted by first uncompressing the
tar
file and then running tar:</p>
<ul>
  <pre>% tar xvzf MB-System.tar.gz</pre>
</ul>
<p>This will create a directory called (for the 5.1.2 distribution): </p>
<ul>
  <pre>mbsystem-5.1.2</pre>
</ul>
<p>In order to
configure your installation, you must edit the perl script
mbsystem-5.1.2/install_makefiles, and set a number of parameters to reflect the system architecture, the location of the installation, and the locations of certain required libraries.
This script will read template makefiles in the MB-System
source
directories and create makefiles with the correct dependencies, compile flags, and link flags. The important parameters to be set in install_makefiles are listed below. The install_makefiles script includes comments suggesting parameters to use for many common computer systems.</p>
<p>These parameters must be set for all installations:</p>
<ul>
  <li> MBSYSTEM_HOME	- Absolute path to the directory containing install_makefiles.</li>
  <li>OS		- Operating system (Recognized options are: DARWIN, LINUX, CYGWIN, SUN, IRIX, IRIX64, SOLARIS, HPUX, LYNX, CYGWIN or OTHER).</li>
  <li>CFLAGS		- Compile flags for C source files. These vary with different operating systems and installations.</li>
  <li>LFLAGS		- Load flags for all object files.</li>
  <li>NETCDFLIBDIR	- Location of NetCDF library libnetcdf.a</li>
  <li>NETCDFINCDIR	- Location of NetCDF include file netcdf.h</li>
  <li>GMTLIBDIR-	Location of GMT libraries libgmt.a and libpsl.a</li>
  <li>GMTINCDIR	- Location of GMT include files gmt.h, grd.h, and pslib.h</li>
  <li>LEVITUS		- Path of Levitus global water properties data file. This is usually $MBSYSTEM_HOME/share/annual.</li>
  <li>PROJECTIONS	- Path of PROJ4 projections database. This is usually $MBSYSTEM_HOME/share/Projections.dat.<br>
  </li>
</ul>
<p>These two parameters are required to build the graphical tools mbedit, mbnavedit, mbvelocitytool, mbnavadjust,                                mbgrdviz, and mbeditviz. If these parameters are not both set, no graphical tools will be built.</p>
<ul>
  <li>MOTIFINCDIR	- Location of Motif include files.</li>
  <li>MOTIFLIBS	- X11 and Motif libraries required for graphical tools.<br>
  </li>
</ul>
<p>This parameter must be set to build the  openGL tools mbgrdviz and mbeditviz:</p>
<ul>
  <li>OPENGLLIBS	- OpenGL libraries required for new graphical tools, including mbgrdviz and mbeditviz. If this parameter is not set, mbgrdviz and mbeditviz will not be built<br>
  </li>
</ul>
<p>This parameter must be set to build the sonogram calculation program mbsegypsd:</p>
<ul>
  <li>FFTWLIBDIR	- location of FFTW library providing fast Fourier transform.</li>
  <li>FFTWINCDIR - location of FFTW include files</li>
</ul>
<p>This parameter must be set for the tidal modeling program mbotps to work:</p>
<ul>
  <li>OTPSDIR	- location of OTPSnc tide prediction program predict_tide.</li>
</ul>
<p>This optional parameter can be used to specify a  non-default C compiler:</p>
<ul>
  <li>CC		- C compiler to be used.<br>
  </li>
</ul>
<p>These optional parameters can be used to  specify linking with an independent installation of the PROJ4 library. In this case, the PROJ4 library included with MB-System will not be built.</p>
<ul>
  <li>PROJLIB         - Path to PROJ4 library (usually libproj.a)</li>
  <li>PROJINCDIR      - Location of PROJ4 include file proj_api.h<br>
  </li>
</ul>
<p>These optional parameters can be used to  specify linking with an independent installation of the GSF library. In this case, the GSF library included with MB-System will not be built.</p>
<ul>
  <li>GSFLIB          - Path to GSF library (usually libgsf.a)</li>
  <li>GSFINCDIR       - Location of GSF include file gsf.h</li>
</ul>
<p>To
  execute
  install_makefiles, do the following:</p>
<ul>
  <pre>% cd mbsystem-5.1.2 </pre>
  <pre>% install_makefiles</pre>
</ul>
<p>Because install_makefiles is a perl script, the executable perl must
be available in the installer's path. Once install_makefiles has been
correctly
configured and run, give the command "make all" to generate the
executable programs:</p>
<ul>
  <pre>% make all</pre>
</ul>
<p>The make command will descend recursively down through the directory
structure, compiling source files, linking object files, and copying
executables
and manual pages to the appropriate directories. The executables will
be
placed in mbsystem-5.1.2/bin, the libraries in mbsystem-5.1.2/lib, and
the manual pages
in mbsystem-5.1.2/man/man1.</p>
<p>Naturally, in order for users to use the MB-System utilities, the
directory
containing the executables must be included in their path. Altering the user path variable is generally accomplished by editing the initialization files hidden in the user's home directory. Which files need to be edited depends on which command line shell is being used. If the user works with <em>csh</em>, then the <em>.cshrc</em> and <em>.login </em>files need to be changed. If the shell is <em>bash</em>, then the <em>.bashrc</em> and <em>.profile</em> files must be altered. See the manual pages for the relevant shell program to determine how to set the user environment. The
executable
<em>perl</em> must also be available in the user's path for most of the macros
to
work.</p>
<p>Most users will also wish to specify which program they generally
use
to view Postscript plots on their screen. This parameter is set

with the mbdefaults program (see the mbdefaults manual page for
details).
Popular open source options for Postscript display include ghostview and gv. The postscript plots can also be imported into proprietary tools like Adobe Illustrator, Adobe Acrobat, or Preview on MacOs X. On old Unix machines,  pageview worked well on Sun workstations running Solaris, and xpsview on on Silicon
Graphics machines running Irix.</p>
<center>
<p><br>
Last Updated: $Date: 2009/03/13 07:05:58 $ $Revision: 5.22 $</p>
</center>
<p>
</p>
<hr width="67%">
<p></p>
<p><a href="mbsystem_home.html"><img width="158" height="55" border="0"
 src="mbsystem_logo_small.gif"></a><a href="mbsystem_home.html">Back
to MB-System Home Page...</a></p>
</body>
</html>
