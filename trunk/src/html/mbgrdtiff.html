<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML VERSION="2.0">
<HEAD>
   <TITLE>MB-System Unix Manual Page: mbgrdtiff</TITLE>
<!-- WEBMAGIC VERSION NUMBER="2.0.2" -->
<!-- WEBMAGIC TRANSLATION NAME="ServerRoot" SRC="/var/www/htdocs/" DST="/" -->
<!-- WEBMAGIC TRANSLATION NAME="ProjectRoot" SRC="./" DST="" -->
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#336699" VLINK="#997040" ALINK="#CC9900">
<BODY>
<CENTER><H3><U>MB-System Unix Manual Page</U></H3></CENTER>
<PRE>
<H1>mbgrdtiff</H1>
Section:  MB-System 5.0  (1)<BR>Updated:  5 February 2015 <BR><A HREF="#index">Index</A>
<HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

<B>mbgrdtiff</B> - <B>GMT</B> plug-in module for generating a geographically
located GeoTIFF image from a GMT grid file.
<P>
<A NAME="lbAC">&nbsp;</A>
<H2>VERSION</H2>

Version 5.0
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>gmt mbgrdtiff</B> <B>-C</B><I>cptfile</I> <B>-I</B><I>grdfile</I>
<B>-O</B><I>tiff_file</I> [<B>-H</B> <B>-K</B><I>intensfile</I> <B>-V -W</B>]
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>DESCRIPTION</H2>

<B>mbgrdtiff</B> is a plug-in module to generate a Geographically located
GeoTiff image from a <B>GMT</B> grid file using <B>GMT</B> (Generic Mapping Tools).
Like <B>mbcontour</B> and <B>mbswath</B>, <B>mbgrdtiff</B>
is fully compatible with the <B>GMT</B> package version 5.
A GeoTIFF image file includes location, projection and scaling information.
The image generation used by <B>mbgrdtiff</B> is identical to
that of the Postscript-producing <B>GMT</B> program
<B>grdimage</B>. In particular, the color map is applied from
a <B>GMT</B> CPT file, and shading overlay grids may be applied.
The image is 8 bits
per pixel if the color map is a grayscale, and 24 bits
per pixel otherwise. In order to automatically generate a
reasonable image of a grid, use the macro <B>mbm_grdtiff</B>.
The program <B>mbgrdtiff</B> recognizes the coordinate system
used by <B>mbgrid</B> or <B>mbmosaic</B> to generate a grid file, and
then embeds the projection and grid bounds information into the TIFF
image in accordance with the GeoTIFF standard. A number of GIS software
packages recognize the georeferencing information in GeoTIFF images.
In particular, images generated by <B>mbgrdtiff</B> from grids created
using <B>mbgrid</B> or <B>mbmosaic</B> can be loaded into the
GRASS, ArcInfo, ArcView, and ArcGIS GIS packages as geographically located
coverages.  The <B>mbgrid</B> and <B>mbmosaic</B> manual pages each contain
an appendix with a complete list of the projected coordinate systems that
may used in grid generation. Some software packages (e.g. Winfrog) do not
recognize the embedded coordinate system information, and install require
a parallel &quot;world&quot; file to specify the bounds and resolution. The <B>-W</B>
option causes a world file to be generated with a &quot;.tfw&quot; suffix.
<P>
In order for <B>GMT</B> to successfully execute <B>mbgrdtiff</B>, the
location of the shared library <I>libmbgmt</I> containing this module must be known to <B>GMT</B>.
This can be accomplished by either setting the GMT_CUSTOM_LIBS parameter
in the file gmt.conf that is part of the GMT installation, by setting
this parameter in the file gmt.conf in the user's home directory, or by
using the GMT module <B>gmtset</B> to modify this parameter in the
current working directory. If, for instance, the <I>libmbgmt</I> shared library
has been installed in the file /usr/lib/libmbgmt.dylib, then the
GMT_CUSTOM_LIBS parameter in a gmt.conf file can be set to:
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GMT_CUSTOM_LIBS&nbsp;=&nbsp;/usr/lib/libmbgmt.dylib
<P>
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHORSHIP</H2>

David W. Caress (<A HREF="mailto:caress@mbari.org">caress@mbari.org</A>)
<BR>

<BR>&nbsp;&nbsp;Monterey&nbsp;Bay&nbsp;Aquarium&nbsp;Research&nbsp;Institute
<BR>

Dale N. Chayes (<A HREF="mailto:dale@ldeo.columbia.edu">dale@ldeo.columbia.edu</A>)
<BR>

<BR>&nbsp;&nbsp;Lamont-Doherty&nbsp;Earth&nbsp;Observatory
<P>
<A NAME="lbAG">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>-C</B>

<DD>
Sets the color palette (CPT) file which controls the color of the plot.
See documentation of the GMT package for a complete description
of cpt files. If the R, G, and B values in the CPT file are all
equal for each data level (i.e. R=G=B), the the output TIFF
image will be 8 bits per pixel. Otherwise, the output TIFF image
will be 24 bits per pixel.
<DT><B>-H</B>

<DD>
This &quot;help&quot; flag cause the program to print out a description
of its operation and then exit immediately.
<DT><B>-I</B>

<DD>
<I>grdfile</I>
<BR>

The first invocation of the <B>-I</B><I>grdfile</I> option sets
the name of the gridded data file to be plotted.
The data must be in a form acceptable to <B>GMT</B> version 3
programs (see the <B>GMT</B> Cookbook &amp; Technical Reference).
<DT><B>-I</B>

<DD>
<I>intensity_file</I>
<BR>

The second invocation of the <B>-I</B><I>grdfile</I> option sets
the name of a gridded data file containing
intensity values to be used for shading the map.
Alternatively, <I>grdfile</I> may be a list of grid files
(one filename on each line) to be used together. If a
list of files is supplied, the intensity files must
conform in order to the list of data grid files they will shade.
<DT><B>-O</B>

<DD>
<I>root</I>
<BR>

Sets the root used to construct the filename of the output shellscript
(<I>root</I>.cmd) and names of files created when the shellscript is
run.  Normally the
name of the input grid file or grid file list is
used as the <I>root</I>.
<DT><B>-V</B>

<DD>
Selects verbose mode [Default runs &quot;silently&quot;].
<DT><B>-W</B>

<DD>
The <B>-W</B> option causes a &quot;world&quot; file to be generated parallel to the
GeoTiff image with a &quot;.tfw&quot; suffix. Some software packages (e.g. Winfrog) do
not recognize the coordinate information embedded in the GeoTiff file, and
look for a world file.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>EXAMPLES</H2>

Suppose we have obtained two GRD files called PunaA_bath.grd
and PunaA_ss.grd, both with dimensions
1162 x 1068. The file PunaA_bath.grd contains seafloor
topography (depth values are negative, ranging
from -5035 m to -1619 m), and the file PunaA_ss.grd
contains a sidescan mosaic (reflectivity values
ranging from 0 to 128 dB). In order to generate
a 24 bit color TIFF image of the seafloor topography, we use:
<BR>

<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>gmt&nbsp;mbgrdtiff&nbsp;-I&nbsp;PunaA_bath.grd&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-O&nbsp;PunaA_bath.tif&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-C&nbsp;bath.cpt&nbsp;-V<BR>
<BR>

where the color is controlled by a GMT cpt file bath.cpt
containing:
<BR>

<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-5250&nbsp;&nbsp;37&nbsp;&nbsp;57&nbsp;175&nbsp;-4875&nbsp;&nbsp;40&nbsp;127&nbsp;251<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-4875&nbsp;&nbsp;40&nbsp;127&nbsp;251&nbsp;-4500&nbsp;&nbsp;50&nbsp;190&nbsp;255<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-4500&nbsp;&nbsp;50&nbsp;190&nbsp;255&nbsp;-4125&nbsp;106&nbsp;235&nbsp;255<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-4125&nbsp;106&nbsp;235&nbsp;255&nbsp;-3750&nbsp;138&nbsp;236&nbsp;174<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-3750&nbsp;138&nbsp;236&nbsp;174&nbsp;-3375&nbsp;205&nbsp;255&nbsp;162<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-3375&nbsp;205&nbsp;255&nbsp;162&nbsp;-3000&nbsp;240&nbsp;236&nbsp;121<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-3000&nbsp;240&nbsp;236&nbsp;121&nbsp;-2625&nbsp;255&nbsp;189&nbsp;&nbsp;87<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-2625&nbsp;255&nbsp;189&nbsp;&nbsp;87&nbsp;-2250&nbsp;255&nbsp;161&nbsp;&nbsp;68<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-2250&nbsp;255&nbsp;161&nbsp;&nbsp;68&nbsp;-1875&nbsp;255&nbsp;186&nbsp;133<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-1875&nbsp;255&nbsp;186&nbsp;133&nbsp;-1500&nbsp;255&nbsp;255&nbsp;255<BR>
<BR>

In order to generate
an 8 bit grayscale TIFF image of the sidescan mosaic, we use:
<BR>

<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>gmt&nbsp;mbgrdtiff&nbsp;-I&nbsp;PunaA_ss.grd&nbsp;&nbsp;<TT>&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-O&nbsp;PunaA_ss.tif&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-C&nbsp;ss.cpt&nbsp;-V<BR>
<BR>

where the grayscale is controlled by a GMT cpt file ss.cpt
containing:
<BR>

<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>&nbsp;0.00&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;16.50&nbsp;&nbsp;26&nbsp;&nbsp;26&nbsp;&nbsp;26<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>16.50&nbsp;&nbsp;26&nbsp;&nbsp;26&nbsp;&nbsp;26&nbsp;&nbsp;&nbsp;22.87&nbsp;&nbsp;51&nbsp;&nbsp;51&nbsp;&nbsp;51<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>22.87&nbsp;&nbsp;51&nbsp;&nbsp;51&nbsp;&nbsp;51&nbsp;&nbsp;&nbsp;27.00&nbsp;&nbsp;77&nbsp;&nbsp;77&nbsp;&nbsp;77<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>27.00&nbsp;&nbsp;77&nbsp;&nbsp;77&nbsp;&nbsp;77&nbsp;&nbsp;&nbsp;30.00&nbsp;102&nbsp;102&nbsp;102<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>30.00&nbsp;102&nbsp;102&nbsp;102&nbsp;&nbsp;&nbsp;32.25&nbsp;128&nbsp;128&nbsp;128<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>32.25&nbsp;128&nbsp;128&nbsp;128&nbsp;&nbsp;&nbsp;34.25&nbsp;153&nbsp;153&nbsp;153<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>34.25&nbsp;153&nbsp;153&nbsp;153&nbsp;&nbsp;&nbsp;36.25&nbsp;179&nbsp;179&nbsp;179<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>36.25&nbsp;179&nbsp;179&nbsp;179&nbsp;&nbsp;&nbsp;38.50&nbsp;204&nbsp;204&nbsp;204<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>38.50&nbsp;204&nbsp;204&nbsp;204&nbsp;&nbsp;&nbsp;41.23&nbsp;230&nbsp;230&nbsp;230<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>41.23&nbsp;230&nbsp;230&nbsp;230&nbsp;&nbsp;128.00&nbsp;255&nbsp;255&nbsp;255<BR>
<BR>

Here greater reflectivity amplitudes are represented by
light grayscales.
<P>
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="mbsystem.html">mbsystem</A></B>(1), <B><A HREF="mbm_grdplot.html">mbm_grdplot</A></B>(1), <B><A HREF="mbgrid.html">mbgrid</A></B>(1), <B><A HREF="mbmosaic.html">mbmosaic</A></B>(1),
<B><A HREF="mbm_grid.html">mbm_grid</A></B>(1), <B><A HREF="mbm_grdtiff.html">mbm_grdtiff</A></B>(1), <B>gmt</B>(1), <B>grdimage</B>(1)
<P>
<A NAME="lbAJ">&nbsp;</A>
<H2>BUGS</H2>

Let us know.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">VERSION</A><DD>
<DT><A HREF="#lbAD">SYNOPSIS</A><DD>
<DT><A HREF="#lbAE">DESCRIPTION</A><DD>
<DT><A HREF="#lbAF">AUTHORSHIP</A><DD>
<DT><A HREF="#lbAG">OPTIONS</A><DD>
<DT><A HREF="#lbAH">EXAMPLES</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">BUGS</A><DD>
</DL>
<HR>
</PRE>

<CENTER><P><BR>
Last Updated: 5 February 2015</P></CENTER>

<HR>
<P><A HREF="mbsystem_man_list.html">Return to list of MB-System manual pages...</A></P>
<P><A HREF="mbsystem_home.html"><IMG SRC="mbsystem_logo_small.gif" BORDER=0 HEIGHT=55 WIDTH=158 ALIGN=BOTTOM></A><A HREF="mbsystem_home.html">Back
to MB-System Home Page...</A></P>

</BODY>
</HTML>
