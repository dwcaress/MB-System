<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML VERSION="2.0">
<HEAD>
   <TITLE>MB-System Unix Manual Page: mbgetesf</TITLE>
<!-- WEBMAGIC VERSION NUMBER="2.0.2" -->
<!-- WEBMAGIC TRANSLATION NAME="ServerRoot" SRC="/var/www/htdocs/" DST="/" -->
<!-- WEBMAGIC TRANSLATION NAME="ProjectRoot" SRC="./" DST="" -->
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#336699" VLINK="#997040" ALINK="#CC9900">
<BODY>
<CENTER><H3><U>MB-System Unix Manual Page</U></H3></CENTER>
<PRE>
<H1>mbgetesf</H1>
Section:  MB-System 5.0  (1)<BR>Updated:  13 April 2010 <BR><A HREF="#index">Index</A>
<HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

<B>mbgetesf</B> - Extract swath bathymetry data flags into an edit save file.
<P>
<A NAME="lbAC">&nbsp;</A>
<H2>VERSION</H2>

Version 5.0
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>mbgetesf</B> [<B>-F</B>format <B>-I</B>infile <B>-M</B>mode <B>-O</B>esffile <B>-V -H</B>]
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>DESCRIPTION</H2>

Swath bathymetry data is typically edited either with interactive
tools such as <B>mbedit</B> or automatic filters such as <B>mbclean</B>.
The beams which are deemed &quot;bad&quot; are flagged, and the flags are
output to an &quot;edit save file&quot;, which can be applied to data
later by <B>mbprocess</B>.  
Occasionally, the need arises to translate data
flagging information from one file to another which represents a
different version of the same dataset.  In particular, it may happen
that editing has been done on a data format which does not support
all of the original data stream (e.g. the edmb Hydrosweep format 22,
which does not contain travel times or amplitudes), but the user now
wishes to work with the complete data stream without having to redo
the editing process. 
<P>
The utility <B>mbgetesf</B> allows the user to extract 
the flagging information in the form of an
&quot;edit save file&quot; like those generated by <B>mbedit</B> and
<B>mbclean</B>. These edits can be applied to data later
using <B>mbprocess</B>. If the edit save file is named
properly (an &quot;.esf&quot; suffix added to the input swath file
name), the edits can automatically be loaded into <B>mbedit</B> or
<B>mbclean</B>.
<P>
The user can extract edit events from only the flagged beams (<B>-M</B><I>1</I>),
or can extract edit events specifying null and flagged beams (<B>-M</B><I>2</I>)
and all (good, flagged, and null) beams (<B>-M</B><I>3</I>). The latter cases are necessary only if
previous editing has involved nulling beams that were 
originally classified as good or unflagging beams that were
originally flagged.
<P>
The default input is from stdin, and the default output is
to standard out.
<P>
<A NAME="lbAF">&nbsp;</A>
<H2>AUTHORSHIP</H2>

David W. Caress (<A HREF="mailto:caress@mbari.org">caress@mbari.org</A>)
<BR>

<BR>&nbsp;&nbsp;Monterey&nbsp;Bay&nbsp;Aquarium&nbsp;Research&nbsp;Institute
<BR>

Dale N. Chayes (<A HREF="mailto:dale@ldeo.columbia.edu">dale@ldeo.columbia.edu</A>)
<BR>

<BR>&nbsp;&nbsp;Lamont-Doherty&nbsp;Earth&nbsp;Observatory
<P>
<A NAME="lbAG">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>-F</B>

<DD>
<I>format</I>
<BR>

Sets the format for the input and output swath data using 
<B>MBIO</B> integer format identifiers. 
These utilities uses the <B>MBIO</B> library and will read any swath data
format supported by <B>MBIO</B>. A list of the swath data formats
currently supported by <B>MBIO</B> and their identifier values
is given in the <B>MBIO</B> manual page.
<DT><B>-H</B>

<DD>
This &quot;help&quot; flag causes the program to print out a description
of its operation and then exit immediately.
<DT><B>-I</B>

<DD>
<I>infile</I>
<BR>

Data file from which the input data will be read. If
no input file is specified, the input will be read
from stdin. Default: <I>infile</I> = stdin.
<DT><B>-M</B>

<DD>
<I>mode</I>
<BR>

Specifies which beam flag values are output as edit events.
If <I>mode</I> = 1, then only flagged beams are output. If
<I>mode</I> = 2, then flagged and null beams are output. If
<I>mode</I> = 3, then an edit event will be output for every
beam, including those that are &quot;good&quot; (neither flagged nor
null). Default: <I>mode</I> = 1.
<DT><B>-O</B>

<DD>
<I>esffile</I>
<BR>

Specifies output edit save file to which the 
edit events will be written. If
no edit save file is specified, the output will be written
to stdout. Default: <I>esffile</I> = stdout.
<DT><B>-V</B>

<DD>
Normally, <B>mbgetesf</B> works &quot;silently&quot; without outputting
anything to the stderr stream.  If the
<B>-V</B> flag is given, then <B>mbgetesf</B> works in a &quot;verbose&quot; mode and
outputs the program version being used and all error status messages.
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>EXAMPLES</H2>

Suppose one has an edmb format (<B>MBIO</B> format id 22) Hydrosweep
file called hs_ew9103_143.mb22 which has been edited using older
versions of <B>mbedit</B> so that no edit save file was generated.
Further suppose that one's thesis advisor
suggests that the bathymetry would be better if it were recalculated
from travel times using a new water velocity model, requiring that
the raw Hydrosweep data (originally collected in format 21 but
recently translated to format 24) in the file hs_ew9103_143.mb24
be used. First extract the edit events in the form of
a edit save file from the edited edmb file:
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>mbgetesf&nbsp;-F22&nbsp;-Ihs_ew9103_143.mb22&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-Ohs_ew9103_143.mb24.esf&nbsp;-V<BR>
<BR>

Note that the edit save file has been given the name of the
second swath file with &quot;.esf&quot; appended. This naming convention
is the same as if <B>mbedit</B> or <B>mbclean</B> had been
run on hs_ew9103_143.mb24. Now, running either <B>mbedit</B> or <B>mbclean</B>
will automatically load the edit events as a starting point
for editing or filtering.
To simply apply the extracted edit events to the swath bathymetry,
first use <B>mbset</B> to enable applying the edits in the
<B>mbprocess</B> parameter file, and then run <B>mbprocess</B>
to actually apply the edits and generate a processed output
swath file:
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>mbset&nbsp;-Ihs_ew9103_143.mb24&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-PEDITSAVEMODE:1&nbsp;&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>-PEDITSAVEFILE:hs_ew9103_143.mb24.esf&nbsp;&nbsp;-V<BR>
<BR>&nbsp;<TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TT>mbprocess&nbsp;-Ihs_ew9103_143.mb24&nbsp;-V<BR>
<BR>

The output swath file will be named hs_ew9103_143p.mb24.
<P>
<A NAME="lbAI">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="mbsystem.html">mbsystem</A></B>(l), <B><A HREF="mbedit.html">mbedit</A></B>(l), <B><A HREF="mbclean.html">mbclean</A></B>(l),
<B><A HREF="mbset.html">mbset</A></B>(l), <B><A HREF="mbprocess.html">mbprocess</A></B>(l).
<P>
<A NAME="lbAJ">&nbsp;</A>
<H2>BUGS</H2>

Let us know.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">VERSION</A><DD>
<DT><A HREF="#lbAD">SYNOPSIS</A><DD>
<DT><A HREF="#lbAE">DESCRIPTION</A><DD>
<DT><A HREF="#lbAF">AUTHORSHIP</A><DD>
<DT><A HREF="#lbAG">OPTIONS</A><DD>
<DT><A HREF="#lbAH">EXAMPLES</A><DD>
<DT><A HREF="#lbAI">SEE ALSO</A><DD>
<DT><A HREF="#lbAJ">BUGS</A><DD>
</DL>
<HR>
</PRE>

<CENTER><P><BR>
Last Updated: 13 April 2010</P></CENTER>

<HR>
<P><A HREF="mbsystem_man_list.html">Return to list of MB-System manual pages...</A></P>
<P><A HREF="mbsystem_home.html"><IMG SRC="mbsystem_logo_small.gif" BORDER=0 HEIGHT=55 WIDTH=158 ALIGN=BOTTOM></A><A HREF="mbsystem_home.html">Back
to MB-System Home Page...</A></P>

</BODY>
</HTML>
